<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>shemxz.com</title>
  <link rel="icon" type="image/x-icon" href="favicon3.png">
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Oswald:wght@400;700&display=swap" rel="stylesheet">

  <style>
    /* ─────────────  COLOR SYSTEM  ───────────── **/
    :root{
  --primary-dark:#000000;
  --primary:#0b0b0c;
  --accent:#ffffff; 
  --accent-bright:#ffffff;

      /* Anime List Specific Colors */
      --cat-platinum: #00E5FF;
      --cat-overaverage: #FFA500; /* Using a common orange */
      --cat-average: #FFEB3B;    /* Using a common yellow */
      --cat-unfinished: #FF5252;
      --cat-planned: #EA80FC;
    }

    :root{
      --text-gradient:linear-gradient(45deg,var(--primary-dark),var(--primary),var(--accent));
      --glass-bg:rgba(0,0,0,0.3);
      --glass-border:rgba(22,22,24,0.2); /* Using primary with opacity */
      
      /* RGBA helper variables for backgrounds and borders */
      --primary-rgba-05: rgba(22,22,24,0.05);
      --primary-rgba-08: rgba(22,22,24,0.08);
      --primary-rgba-10: rgba(22,22,24,0.10);
      --primary-rgba-12: rgba(22,22,24,0.12);
      --primary-rgba-15: rgba(22,22,24,0.15);
      --primary-rgba-20: rgba(22,22,24,0.2);
      --primary-rgba-25: rgba(22,22,24,0.25);
      --primary-rgba-28: rgba(22,22,24,0.28);
      --primary-rgba-30: rgba(22,22,24,0.3);
      --primary-rgba-40: rgba(22,22,24,0.4);
      --primary-rgba-50: rgba(22,22,24,0.5);
      --primary-rgba-60: rgba(22,22,24,0.6);
      
      --accent-rgba-03: rgba(255,255,255,0.03);
      --accent-rgba-04: rgba(255,255,255,0.04);
      --accent-rgba-05: rgba(255,255,255,0.05);
      --accent-rgba-06: rgba(255,255,255,0.06);
      --accent-rgba-08: rgba(255,255,255,0.08);
      --accent-rgba-10: rgba(255,255,255,0.10);
      --accent-rgba-12: rgba(255,255,255,0.12);
      --accent-rgba-14: rgba(255,255,255,0.14);
      --accent-rgba-25: rgba(255,255,255,0.25);
      --accent-rgba-40: rgba(255,255,255,0.4);
    }

    /* ─────────────  RESET  ───────────── */
    *{box-sizing:border-box;}
    body{
      margin:0;
      padding:0;
      background:linear-gradient(135deg,var(--primary-dark) 0%,var(--primary) 50%,var(--primary-dark) 100%);
      color:#fff;
      font-family:"Segoe UI",sans-serif;
      min-height:100vh;
      overflow-x:hidden;
      position:relative;
    }

    /* ─────────────  INTRO  ───────────── */
    .intro-overlay{
      position:fixed;
      inset:0;
      background:radial-gradient(ellipse at center, #0a0a0a 0%, #000000 100%);
      z-index:9999;
      display:flex;
      align-items:center;
      justify-content:center;
      transition:opacity 1s ease-out;
      overflow:hidden;
    }
    .intro-overlay.fade-out{opacity:0;pointer-events:none;}

    /* Animated background particles */
    .intro-overlay::before{
      content:'';
      position:absolute;
      inset:0;
      background-image:
        radial-gradient(2px 2px at 20% 30%, rgba(255,255,255,0.15), transparent),
        radial-gradient(2px 2px at 60% 70%, rgba(255,255,255,0.1), transparent),
        radial-gradient(1px 1px at 50% 50%, rgba(255,255,255,0.2), transparent),
        radial-gradient(1px 1px at 80% 10%, rgba(255,255,255,0.15), transparent),
        radial-gradient(2px 2px at 90% 60%, rgba(255,255,255,0.1), transparent);
      background-size:200% 200%;
      animation:particleMove 20s ease-in-out infinite;
      opacity:0.6;
    }
    @keyframes particleMove{
      0%,100%{background-position:0% 0%, 100% 100%, 50% 50%, 0% 100%, 100% 0%;}
      50%{background-position:100% 100%, 0% 0%, 50% 50%, 100% 0%, 0% 100%;}
    }

    /* Floating orbs in background */
    .intro-orb{
      position:absolute;
      border-radius:50%;
      filter:blur(60px);
      opacity:0.3;
      animation:floatOrb 15s ease-in-out infinite;
    }
    .intro-orb:nth-child(1){
      width:300px;
      height:300px;
      background:linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.05));
      top:10%;
      left:10%;
      animation-delay:0s;
    }
    .intro-orb:nth-child(2){
      width:200px;
      height:200px;
      background:linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      bottom:15%;
      right:15%;
      animation-delay:-5s;
    }
    .intro-orb:nth-child(3){
      width:250px;
      height:250px;
      background:linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      top:50%;
      right:10%;
      animation-delay:-10s;
    }
    @keyframes floatOrb{
      0%,100%{transform:translate(0,0) scale(1);}
      33%{transform:translate(30px,-40px) scale(1.1);}
      66%{transform:translate(-20px,30px) scale(0.9);}
    }

    .intro-content{
      text-align:center;
      animation:introFadeIn .8s ease-out;
      position:relative;
      z-index:2;
    }
    @keyframes introFadeIn{
      from{opacity:0;transform:scale(.8) translateY(30px);}
      to{opacity:1;transform:scale(1) translateY(0);}
    }

    .intro-logo{
      width:140px;
      height:140px;
      margin:0 auto 30px;
      position:relative;
      animation:logoFloat 3s ease-in-out infinite;
    }
    @keyframes logoFloat{
      0%,100%{transform:translateY(0) rotate(0deg);}
      50%{transform:translateY(-10px) rotate(2deg);}
    }

    .intro-logo::before{
      content:'';
      position:absolute;
      inset:-20px;
      background:radial-gradient(circle, rgba(255,255,255,0.2) 0%, transparent 70%);
      border-radius:50%;
      animation:pulseGlow 2s ease-in-out infinite;
      z-index:-1;
    }
    @keyframes pulseGlow{
      0%,100%{opacity:0.3;transform:scale(1);}
      50%{opacity:0.6;transform:scale(1.1);}
    }

    .intro-logo svg{
      width:100%;
      height:100%;
      animation:fadeInScale 1s ease-out, logoShimmer 3s ease-in-out infinite 1s;
      filter:drop-shadow(0 0 20px rgba(255,255,255,0.3));
    }
    @keyframes fadeInScale{
      from{opacity:0;transform:scale(.5) rotate(-10deg);}
      to{opacity:1;transform:scale(1) rotate(0deg);}
    }
    @keyframes logoShimmer{
      0%,100%{filter:drop-shadow(0 0 20px rgba(255,255,255,0.3));}
      50%{filter:drop-shadow(0 0 30px rgba(255,255,255,0.6)) drop-shadow(0 0 40px rgba(255,255,255,0.3));}
    }

    .intro-text{
      font-size:3rem;
      font-weight:300;
      letter-spacing:5px;
      margin-bottom:30px;
      background:linear-gradient(45deg,#ffffff,#e0e0e0,#ffffff,#e0e0e0);
      background-size:200% auto;
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      opacity:0;
      animation:fadeInUp .8s ease-out .3s forwards, textShimmer 3s linear infinite .8s;
      position:relative;
      text-shadow:0 0 30px rgba(255,255,255,0.2);
    }
    @keyframes textShimmer{
      to{background-position:200% center;}
    }
    @keyframes fadeInUp{
      from{opacity:0;transform:translateY(20px);}
      to{opacity:1;transform:translateY(0);}
    }

    .intro-text::after{
      content:'';
      position:absolute;
      bottom:-5px;
      left:50%;
      transform:translateX(-50%);
      width:0;
      height:2px;
      background:linear-gradient(90deg, transparent, #ffffff, transparent);
      animation:underlineExpand 1s ease-out 1.1s forwards;
    }
    @keyframes underlineExpand{
      to{width:80%;}
    }

    /* Floating particles */
    .intro-particle{
      position:absolute;
      width:4px;
      height:4px;
      background:rgba(255,255,255,0.6);
      border-radius:50%;
      animation:particleFloat 8s ease-in-out infinite;
      opacity:0;
    }
    @keyframes particleFloat{
      0%{opacity:0;transform:translateY(0) translateX(0) scale(0);}
      10%{opacity:1;transform:translateY(-20px) translateX(10px) scale(1);}
      90%{opacity:1;transform:translateY(-200px) translateX(50px) scale(1);}
      100%{opacity:0;transform:translateY(-220px) translateX(60px) scale(0);}
    }

    @keyframes fadeIn{to{opacity:1;}}


    /* ─────────────  GLOBAL CONTAINER  ───────────── */
    .container{opacity:0;transition:opacity 1s ease-out;}
    .container.show{opacity:1;}
    .container{max-width:1400px;margin:0 auto;padding:20px;min-height:100vh;display:flex;flex-direction:column;justify-content:center;}

    /* ─────────────  FLOATING ORBS  ───────────── */
    body::before,body::after{content:'';position:fixed;border-radius:50%;filter:blur(100px);opacity:.5;pointer-events:none;animation:float 20s ease-in-out infinite;}
    body::before{width:400px;height:400px;background:var(--primary-dark);top:-200px;left:-200px;}
    body::after{width:300px;height:300px;background:var(--primary);bottom:-150px;right:-150px;animation-delay:-10s;}
    @keyframes float{0%,100%{transform:translate(0,0) scale(1);}33%{transform:translate(30px,-30px) scale(1.1);}66%{transform:translate(-20px,20px) scale(.9);}}


    /* ─────────────  HERO  ───────────── */
    .hero-home-wrapper{
      width:100%;
      margin: 0 auto 28px auto;
      position: relative;
      overflow: visible;
    }
    .hero-section{
      text-align:left;
      margin-bottom:26px;
    }
    .hero-shell{
      position:relative;
      overflow:hidden;
      border-radius:24px;
      border:1px solid var(--glass-border);
      background:
        radial-gradient(1200px 400px at 20% 20%, rgba(255,255,255,0.10), transparent 55%),
        radial-gradient(900px 450px at 80% 60%, rgba(255,255,255,0.08), transparent 55%),
        linear-gradient(135deg, rgba(0,0,0,0.28), rgba(255,255,255,0.04));
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
      box-shadow: 0 30px 70px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.06);
      padding: 28px;
    }
    .hero-shell::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(circle at var(--mouse-x, 25%) var(--mouse-y, 25%), rgba(255,255,255,0.12), transparent 55%),
        linear-gradient(45deg, rgba(255,255,255,0.09), transparent 55%);
      opacity: 0.65;
      pointer-events:none;
      filter: blur(0px);
    }
    .hero-grid{
      position:relative;
      z-index:1;
      display:grid;
      grid-template-columns: 1.3fr 0.7fr;
      gap: 18px 24px;
      align-items: center;
    }
    .hero-kicker{
      display:inline-flex;
      align-items:center;
      gap:10px;
      font-size:0.78rem;
      letter-spacing:0.18em;
      text-transform:uppercase;
      opacity:0.85;
      color: var(--accent-bright);
      margin-bottom: 10px;
    }
    .hero-kicker .dot{
      width:10px;height:10px;border-radius:999px;
      background: var(--accent);
      box-shadow: 0 0 16px rgba(255,255,255,0.28);
      opacity: 0.75;
    }
    .hero-title{
      margin:0;
      line-height:1.05;
    }
    .name{
      font-size:clamp(3rem,8vw,5rem);
      margin:0 0 15px 0;
      letter-spacing:3px;
      font-weight:300;
      background:var(--text-gradient);
      background-clip:text;
      -webkit-background-clip:text;
      -webkit-text-fill-color:#ffffff09;
      text-shadow:0 0 30px #00000063;
      position:relative;
      display:inline-block;
    }
    .name::before{
      content:attr(data-text);
      position:absolute;
      inset:0;
      background:linear-gradient(
        75deg,
        transparent 0%,
        transparent 40%,
        rgba(255,255,255,0.9) 50%,
        transparent 60%,
        transparent 100%
      );
      background-size:260% 100%;
      background-position:-160% 0;
      -webkit-background-clip:text;
      background-clip:text;
      -webkit-text-fill-color:transparent;
      opacity:0;
      pointer-events:none;
      /* subtle black glow behind the shimmer */
      filter:drop-shadow(0 0 10px #00000063);
      /* near-continuous flowing shimmer */
      animation:heroNameShimmer 5.5s linear infinite;
    }
    @keyframes heroNameShimmer{
      0%{
        background-position:-160% 0;
        opacity:0;
      }
      5%{
        opacity:1;
      }
      95%{
        background-position:160% 0;
        opacity:1;
      }
      100%{
        background-position:160% 0;
        opacity:0;
      }
    }

    .hero-subtitle{
      margin: 0 0 10px 0;
      font-size: 1.05rem;
      color: rgba(255,255,255,0.86);
      letter-spacing: 0.02em;
      line-height: 1.55;
      max-width: 62ch;
    }
    .typing{font-size:1.15rem;color:var(--accent);font-family:'Courier New',monospace;margin:0;min-height:1.5em;}
    .typing::after{content:'|';animation:blink 1s step-start infinite;color:var(--primary);}
    @keyframes blink{50%{opacity:0;}}

    .hero-actions{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 16px;
    }
    .hero-action{
      border: 1px solid var(--primary-rgba-30);
      background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      color: #fff;
      padding: 10px 14px;
      border-radius: 14px;
      cursor: pointer;
      text-decoration:none;
      font-weight: 700;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.82rem;
      transition: transform .25s ease, border-color .25s ease, box-shadow .25s ease, background .25s ease;
      display:inline-flex;
      align-items:center;
      gap:10px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 10px 24px rgba(0,0,0,0.18);
    }
    .hero-action svg{ width: 18px; height: 18px; fill: currentColor; opacity: 0.95; }
    .hero-action:hover{
      transform: translateY(-2px);
      border-color: var(--primary);
      background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
      box-shadow: 0 14px 30px rgba(0,0,0,0.24);
    }
    .hero-action:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px var(--primary-rgba-40), 0 0 0 6px rgba(255,255,255,0.10);
    }

    .hero-side{
      display:flex;
      justify-content:flex-end;
    }
    .hero-profile{
      width: 100%;
      max-width: 360px;
      border-radius: 20px;
      border: 1px solid var(--primary-rgba-25);
      background: linear-gradient(135deg, rgba(0,0,0,0.25), rgba(255,255,255,0.04));
      padding: 18px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
      position:relative;
      overflow:hidden;
    }
    .hero-profile::after{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.10), transparent 60%);
      opacity:.8;
      pointer-events:none;
    }
    .hero-profile-inner{ position:relative; z-index:1; display:flex; gap:14px; align-items:center; }
    .hero-avatar{
      width: 54px;
      height: 54px;
      border-radius: 16px;
      background: linear-gradient(135deg, rgba(255,255,255,0.16), rgba(255,255,255,0.05));
      border: 1px solid rgba(255,255,255,0.12);
      display:flex;
      align-items:center;
      justify-content:center;
      font-family: "Bebas Neue","Oswald",sans-serif;
      font-size: 1.8rem;
      letter-spacing: 0.08em;
      box-shadow: 0 10px 26px rgba(0,0,0,0.25);
    }
    .hero-meta{ min-width:0; }
    .hero-meta .label{
      font-size: 0.72rem;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      opacity: 0.72;
      margin: 0 0 6px 0;
    }
    .hero-meta .value{
      font-size: 0.98rem;
      font-weight: 700;
      margin: 0;
      line-height: 1.35;
    }
    .hero-meta .sub{
      font-size: 0.82rem;
      opacity: 0.80;
      margin: 6px 0 0 0;
      line-height: 1.4;
    }

    /* ─────────────  HOME (TAB)  ───────────── */
    .home-layout{
      display:grid;
      grid-template-columns: 1.15fr 0.85fr;
      gap: 18px;
      align-items:start;
      margin-top: 8px;
    }
    .home-stack{
      display:flex;
      flex-direction:column;
      gap: 18px;
    }
    .home-card{
      background: linear-gradient(135deg, rgba(0,0,0,0.22) 0%, rgba(255,255,255,0.04) 100%);
      border: 1px solid var(--primary-rgba-25);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 18px 44px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.05);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      position: relative;
      overflow: hidden;
      opacity: 0;
      transform: translateY(14px);
      animation: fadeInUp 0.6s cubic-bezier(0.4,0,0.2,1) forwards;
    }
    .home-card::before{
      content:"";
      position:absolute;
      inset:0;
      background: radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255,255,255,0.08), transparent 60%);
      opacity: 0;
      transition: opacity .35s ease;
      pointer-events:none;
    }
    .home-card:hover::before{ opacity: 1; }
    .home-card h3{
      margin:0 0 10px 0;
      font-family: "Bebas Neue","Oswald",sans-serif;
      font-size: 1.55rem;
      letter-spacing: 0.10em;
      text-transform: uppercase;
      color:#fff;
      display:flex;
      align-items:center;
      gap: 10px;
    }
    .home-card h3 svg{ width: 22px; height: 22px; fill: currentColor; opacity: 0.9; }
    .home-card p{
      margin: 0;
      color: rgba(255,255,255,0.84);
      line-height: 1.65;
      font-size: 0.95rem;
    }
    .home-card .muted{ opacity: 0.78; font-size: 0.9rem; }

    .home-links{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 14px;
    }
    .home-link-tile{
      display:flex;
      align-items:center;
      gap: 14px;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      text-decoration:none;
      color:#fff;
      transition: transform .25s ease, border-color .25s ease, box-shadow .25s ease, background .25s ease;
      position:relative;
      overflow:hidden;
    }
    .home-link-tile::after{
      content:"";
      position:absolute;
      inset:-2px;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.16), transparent);
      transform: translateX(-120%);
      transition: transform .6s ease;
      pointer-events:none;
      opacity: 0.65;
    }
    .home-link-tile:hover::after{ transform: translateX(120%); }
    .home-link-tile:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.18);
      box-shadow: 0 14px 30px rgba(0,0,0,0.25);
      background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
    }
    .home-link-tile:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px var(--primary-rgba-40), 0 0 0 6px rgba(255,255,255,0.10);
    }
    .home-link-icon{
      width: 46px; height: 46px;
      border-radius: 14px;
      display:flex;
      align-items:center;
      justify-content:center;
      background: linear-gradient(135deg, rgba(255,255,255,0.14), rgba(255,255,255,0.04));
      border: 1px solid rgba(255,255,255,0.10);
      flex: 0 0 auto;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.05);
    }
    .home-link-icon svg{ width: 26px; height: 26px; fill: currentColor; opacity: 0.92; }
    .home-link-text{ min-width:0; flex:1; }
    .home-link-title{
      font-weight: 800;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      font-size: 0.86rem;
      margin: 0 0 2px 0;
    }
    .home-link-sub{
      font-size: 0.88rem;
      opacity: 0.82;
      margin: 0;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .home-link-cta{
      font-size: 0.82rem;
      opacity: 0.80;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      flex: 0 0 auto;
    }

    .home-nav-grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 14px;
    }
    .home-nav-btn{
      width:100%;
      text-align:left;
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      color:#fff;
      border-radius: 16px;
      padding: 14px 14px;
      cursor:pointer;
      transition: transform .25s ease, border-color .25s ease, box-shadow .25s ease, background .25s ease;
      display:flex;
      align-items:center;
      gap: 12px;
      position:relative;
      overflow:hidden;
    }
    .home-nav-btn:hover{
      transform: translateY(-2px);
      border-color: rgba(255,255,255,0.18);
      box-shadow: 0 14px 30px rgba(0,0,0,0.25);
      background: linear-gradient(135deg, rgba(255,255,255,0.12), rgba(255,255,255,0.04));
    }
    .home-nav-btn:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px var(--primary-rgba-40), 0 0 0 6px rgba(255,255,255,0.10);
    }
    .home-nav-btn svg{ width: 22px; height: 22px; fill: currentColor; opacity: 0.9; }
    .home-nav-btn .title{ font-weight: 900; letter-spacing: 0.06em; text-transform: uppercase; font-size: 0.86rem; margin:0; }
    .home-nav-btn .desc{ margin: 3px 0 0 0; opacity: 0.82; font-size: 0.9rem; line-height: 1.3; }

    .home-stats{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap: 10px;
      margin-top: 14px;
    }
    .home-stat{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.10);
      background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .home-stat .k{ font-size: 0.72rem; letter-spacing: 0.16em; text-transform: uppercase; opacity: 0.72; margin:0 0 8px 0; }
    .home-stat .v{ margin:0; font-size: 1.6rem; font-weight: 300; }
    .home-stat .s{ margin:8px 0 0 0; opacity: 0.78; font-size: 0.86rem; }
    .home-stat .v #visitorCount{ font-size: 1.9rem; } /* keep your existing animation */

    /* reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{ animation-duration:0.001ms !important; animation-iteration-count:1 !important; transition-duration:0.001ms !important; scroll-behavior:auto !important; }
      .typing::after{ animation:none !important; }
    }

    /* ─────────────  CARD GLASS  ───────────── */
    .main-content{background:var(--glass-bg);backdrop-filter:blur(20px);border:1px solid var(--glass-border);border-radius:20px;padding:40px;box-shadow:0 25px 50px var(--primary-rgba-15);}

    /* ─── Tabs ─── */
    .category-tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      margin-bottom: 40px;
    }

    .tab-button {
      padding: 12px 24px;
      border-radius: 12px;
      border: 2px solid transparent;
      background: linear-gradient(to bottom right, rgba(255,255,255,0.05), rgba(255,255,255,0));
      color: var(--accent-bright);
      font-weight: 600;
      font-size: 0.95rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      display: inline-flex;
      align-items: center;
      gap: 10px;
    }

    .tab-button svg {
      width: 18px;
      height: 18px;
      fill: currentColor;
      transition: transform 0.3s ease;
    }

    .tab-button:hover {
      background: linear-gradient(to bottom right, var(--primary-dark), var(--primary));
      color: #fff;
      transform: translateY(-1px);
      box-shadow: 0 6px 12px rgba(0,0,0,0.2);
    }

    .tab-button:hover svg {
      transform: scale(1.1);
    }

    .tab-button.active {
      background: linear-gradient(to bottom right, var(--primary), var(--accent));
      color: #fff;
      border-color: var(--primary);
      box-shadow: 0 4px 10px var(--primary-rgba-40);
    }

    /* ─── Accolades grid / Anime Grid ─── */
    .accolades-container {display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px;opacity:0;transform:translateY(20px);animation:fadeInUp .6s ease forwards;}

    .anime-grid-container {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
      gap: 16px;
      animation: none;
    }

    .accolade-card, .anime-card {
      background:linear-gradient(135deg,var(--primary-rgba-10) 0%,var(--accent-rgba-05) 100%);
      border:1px solid var(--primary-rgba-30);
      border-radius:15px;
      padding:20px;
      text-align:left;
      transition:all .4s cubic-bezier(0.4, 0, 0.2, 1);
      position:relative;
      overflow:hidden;
      display: flex;
      flex-direction: column;
      overflow:visible;
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
    }
    .accolade-card::before {
      content:'';
      position:absolute;
      inset:0;
      background:radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255,255,255,0.08) 0%, transparent 70%);
      opacity:0;
      transition:opacity .4s ease;
      pointer-events:none;
      border-radius:15px;
    }
    .accolade-card:hover::before {
      opacity:1;
    }
    .accolade-card:hover, .anime-card:hover {
      transform:translateY(-8px) scale(1.03);
      border-color:var(--primary);
      box-shadow:0 4px 12px rgba(0,0,0,0.2);
      background:linear-gradient(135deg,var(--primary-rgba-15) 0%,var(--accent-rgba-08) 100%);
    }
    
    .accolade-icon{
      width:50px;
      height:50px;
      margin:0 auto 15px;
      display:block;
      animation:pulse 2s ease-in-out infinite;
      position:relative;
    }
    .accolade-icon::after{
      content:'';
      position:absolute;
      inset:-5px;
      border-radius:50%;
      background:radial-gradient(circle, var(--primary-rgba-30) 0%, transparent 70%);
      opacity:0;
      transition:opacity .4s ease;
    }
    .accolade-card:hover .accolade-icon::after{
      opacity:1;
      animation:pulseGlow 2s ease-in-out infinite;
    }
    @keyframes pulseGlow{
      0%,100%{transform:scale(1);opacity:0.5;}
      50%{transform:scale(1.2);opacity:1;}
    }
    .accolade-icon svg{
      width:100%;
      height:100%;
      fill:#fff;
      filter:drop-shadow(0 0 10px var(--primary-rgba-50));
      transition:all .4s cubic-bezier(0.4, 0, 0.2, 1);
      position:relative;
      z-index:1;
    }
    .accolade-card:hover .accolade-icon svg{
      fill:var(--accent);
      transform:scale(1.15) rotate(5deg);
      filter:drop-shadow(0 0 20px var(--accent-rgba-50));
    }
    @keyframes pulse{0%,100%{transform:scale(1);}50%{transform:scale(1.1);}}

    .accolade-title{
      font-size:1.1rem;
      font-weight:600;
      color:var(--accent);
      margin-bottom:8px;
      text-align:center;
      transition:all .3s ease;
    }
    .accolade-card:hover .accolade-title{
      color:#fff;
      text-shadow:0 0 10px var(--accent-rgba-40);
    }
    .accolade-desc{
      font-size:.9rem;
      color:#ddd;
      opacity:.8;
      text-align:center;
      transition:opacity .3s ease;
    }
    .accolade-card:hover .accolade-desc{
      opacity:1;
    }

/* ─────────────  TOKYO GHOUL GRAFFITI SECTION TITLES  ───────────── */
.section-title {
  opacity: 0;
  transform: translateY(20px);
  display: inline-flex;
  align-items: center;
  gap: 18px;
  font-size: 2.7rem;
  font-weight: 700;
  letter-spacing: 0.5px;
  color: #fff;
  font-family: "Bebas Neue", "Oswald", sans-serif; /* graffiti style */
  text-shadow:
    0 0 6px rgba(255, 0, 0, 0.3),
    0 0 18px rgba(255, 0, 0, 0.15);
  position: relative;
  margin: 0 auto 48px auto;
  animation: fadeInUp 0.7s cubic-bezier(0.4,0,0.2,1) forwards;
  line-height: 1.1;
  filter: drop-shadow(0 0 8px rgba(255,0,0,0.22));
}

/* red glitch underline slash */
.section-title::before {
  content: "";
  position: absolute;
  bottom: -10px;
  left: 50%;
  transform: translateX(-50%) rotate(-2deg);
  width: 110px;
  height: 4px;
  background: linear-gradient(90deg, transparent 0%, #ff2b2b 50%, transparent 100%);
  filter: drop-shadow(0 0 6px rgba(255,0,0,0.4));
  opacity: 0.9;
}

/* subtle drifting distort glitch */
.section-title::after {
  content: attr(data-glitch);
  position: absolute;
  top: 0;
  left: 0;
  color: #ff2b2b;
  opacity: 0.15;
  transform: translate(3px, -3px);
  pointer-events: none;
  text-shadow: 
    -1px 0 #ff2b2b,
    1px 0 #ff2b2b;
}

/* graffiti icon box */
.section-title svg {
  width: 46px;
  height: 46px;
  padding: 9px;
  border-radius: 10px;
  background: #111;
  border: 2px solid rgba(255, 0, 0, 0.4);
  box-shadow:
    0 0 12px rgba(255, 0, 0, 0.35),
    inset 0 0 12px rgba(255, 0, 0, 0.25);
  transition: 0.25s ease;
}

.section-title svg path {
  fill: #ff4040;
}

/* hover = violent glitch pop */
.section-title:hover {
  text-shadow:
    0 0 8px rgba(255, 0, 0, 0.4),
    0 0 22px rgba(255, 0, 0, 0.25);
}

.section-title:hover svg {
  transform: translateY(-3px) scale(1.08) rotate(-2deg);
  box-shadow:
    0 0 16px rgba(255,0,0,0.5),
    inset 0 0 16px rgba(255,0,0,0.3);
}

/* RESPONSIVE FIXES */
@media (max-width: 768px) {
  .section-title {
    font-size: 2.2rem;
    gap: 14px;
    margin-bottom: 36px;
  }
  .section-title svg {
    width: 40px;
    height: 40px;
    padding: 7px;
  }
}

@media (max-width: 480px) {
  .section-title {
    font-size: 1.9rem;
    gap: 12px;
    margin-bottom: 28px;
  }
  .section-title svg {
    width: 34px;
    height: 34px;
    padding: 6px;
  }
}


    .hidden{display:none!important;}

    /* ─── Sparkles ─── */
    .sparkle{width:6px;height:6px;background:var(--accent);border-radius:50%;position:absolute;left:0;top:0;transform:translate(-50%,-50%);animation:sparkle-burst .8s ease-out forwards;filter:drop-shadow(0 0 6px var(--accent-rgba-40));opacity:.9;}
    @keyframes sparkle-burst{0%{transform:translate(-50%,-50%) scale(1);opacity:1;}100%{transform:rotate(var(--angle)) translate(var(--distance)) scale(.5);opacity:0;}}

    /* ─── Social cards ─── */
    .social-links-container{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:25px;margin-top:30px;}
    .social-card{
      background:linear-gradient(135deg,var(--primary-rgba-10) 0%,var(--accent-rgba-05) 100%);
      border:1px solid var(--primary-rgba-30);
      border-radius:15px;
      padding:25px;
      display:flex;
      align-items:center;
      gap:20px;
      text-decoration:none;
      color:#fff;
      transition:all .4s cubic-bezier(0.4, 0, 0.2, 1);
      position:relative;
      overflow:hidden;
      opacity:0;
      transform:translateY(20px);
      animation:fadeInUp .6s ease forwards;
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
    }
    .social-card:nth-child(1){animation-delay:.1s;}
    .social-card:nth-child(2){animation-delay:.2s;}
    .social-card:nth-child(3){animation-delay:.3s;}
    
    .social-card::before{
      content:'';
      position:absolute;
      inset:0;
      background:radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255,255,255,0.1) 0%, transparent 70%);
      opacity:0;
      transition:opacity .4s ease;
      pointer-events:none;
    }
    .social-card:hover::before{
      opacity:1;
    }
    
    .social-card::after{
      content:'';
      position:absolute;
      inset:-2px;
      border-radius:15px;
      padding:2px;
      background:linear-gradient(45deg, var(--primary), var(--accent), var(--primary));
      background-size:200% 200%;
      -webkit-mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask:linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite:xor;
      mask-composite:exclude;
      opacity:0;
      transition:opacity .4s ease;
      animation:borderShimmer 3s linear infinite;
    }
    @keyframes borderShimmer{
      0%{background-position:0% 50%;}
      50%{background-position:100% 50%;}
      100%{background-position:0% 50%;}
    }
    .social-card:hover::after{
      opacity:0.6;
    }
    
    .social-card:hover{
      transform:translateY(-8px) scale(1.03);
      border-color:var(--primary);
      box-shadow:0 20px 40px var(--primary-rgba-30), 0 0 0 1px var(--primary-rgba-15);
      background:linear-gradient(135deg,var(--primary-rgba-15) 0%,var(--accent-rgba-08) 100%);
    }

    .social-icon{
      width:60px;
      height:60px;
      background:linear-gradient(135deg, var(--primary-rgba-20), var(--primary-rgba-10));
      border-radius:12px;
      display:flex;
      align-items:center;
      justify-content:center;
      flex-shrink:0;
      position:relative;
      transition:all .4s cubic-bezier(0.4, 0, 0.2, 1);
      box-shadow:0 4px 12px rgba(0,0,0,0.2);
    }
    .social-icon::before{
      content:'';
      position:absolute;
      inset:0;
      border-radius:12px;
      background:linear-gradient(135deg, var(--primary), var(--accent));
      opacity:0;
      transition:opacity .4s ease;
    }
    .social-card:hover .social-icon::before{
      opacity:0.3;
    }
    .social-icon svg{
      width:35px;
      height:35px;
      fill:var(--primary);
      transition:all .4s cubic-bezier(0.4, 0, 0.2, 1);
      position:relative;
      z-index:1;
      filter:drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }
    .social-card:hover .social-icon{
      transform:scale(1.1) rotate(5deg);
      box-shadow:0 8px 20px var(--primary-rgba-40);
    }
    .social-card:hover .social-icon svg{
      fill:var(--accent);
      transform:scale(1.15);
      filter:drop-shadow(0 0 12px var(--accent-rgba-50));
    }

    .social-title{
      font-size:1.3rem;
      font-weight:600;
      color:var(--accent);
      margin-bottom:5px;
      text-align:left;
      transition:all .3s ease;
      position:relative;
    }
    .social-card:hover .social-title{
      color:#fff;
      text-shadow:0 0 10px var(--accent-rgba-40);
    }
    .social-desc{
      font-size:.95rem;
      color:#ddd;
      opacity:.8;
      transition:opacity .3s ease;
    }
    .social-card:hover .social-desc{
      opacity:1;
    }

    /* ─── Visitor counter ─── */
    .visitor-counter{
      text-align:center;
      margin-top:40px;
      padding:30px;
      background:linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-04) 100%);
      border-radius:20px;
      border:1px solid var(--primary-rgba-25);
      opacity:0;
      transform:translateY(20px);
      animation:fadeInUp .6s ease .3s forwards;
      position:relative;
      overflow:hidden;
      backdrop-filter:blur(10px);
      -webkit-backdrop-filter:blur(10px);
      box-shadow:0 8px 24px rgba(0,0,0,0.2), inset 0 1px 0 rgba(255,255,255,0.1);
    }
    .visitor-counter::before{
      content:'';
      position:absolute;
      inset:0;
      background:radial-gradient(circle at center, rgba(255,255,255,0.05) 0%, transparent 70%);
      animation:pulseGlow 3s ease-in-out infinite;
    }
    @keyframes pulseGlow{
      0%,100%{opacity:0.5;}
      50%{opacity:1;}
    }
    
    .visitor-count {
      font-size: 3rem;
      font-weight: 300;
      background: linear-gradient(45deg, #ffffff, #e0e0e0, #ffffff, #e0e0e0);
      background-size: 200% auto;
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 0 30px rgba(255,255,255,0.4);
      animation: textShimmer 3s linear infinite;
      position:relative;
      z-index:1;
    }
    @keyframes textShimmer{
      to{background-position:200% center;}
    }
    
    .visitor-label{
      font-size:.9rem;
      color:#fff;
      opacity:0.9;
      margin-bottom:15px;
      text-transform:uppercase;
      letter-spacing:3px;
      font-weight:600;
      position:relative;
      z-index:1;
    }

    .visitor-message{
      margin-top:10px;
      font-size:.9rem;
      color:#fff;
      opacity:0;
      transform:translateY(6px);
      letter-spacing:1px;
      transition:opacity .5s ease,transform .5s ease;
    }
    .visitor-message.show{
      opacity:1;
      transform:translateY(0);
    }

    /* visitor pop anim */
    #visitorCount{
      font-size:3rem;
      font-weight:300;
      animation:popFade .8s cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
      display:inline-block;
    }
    @keyframes popFade{
      0%{opacity:0;transform:scale(.5) translateY(20px);}
      60%{transform:scale(1.1) translateY(-5px);}
      100%{opacity:1;transform:scale(1) translateY(0);}
    }

    /* ─── Anime List & Schedule Specific Styles ─── */
    .anime-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      gap: 15px;
      flex-wrap: wrap;
    }
    .anime-controls label {
      color: var(--accent);
      margin-right: 8px;
    }
    .anime-controls button, .anime-controls input[type="text"] {
      padding: 10px 16px;
      background: linear-gradient(135deg, var(--primary-rgba-15), var(--primary-rgba-08));
      border: 1px solid var(--primary-rgba-30);
      color: #fff;
      border-radius: 10px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all .3s cubic-bezier(0.4, 0, 0.2, 1);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
    }
    .anime-controls input[type="text"] {
        cursor: text;
    }
    .anime-controls input[type="text"]:focus {
      outline: none;
      border-color: var(--primary);
      box-shadow: 0 0 0 3px var(--primary-rgba-20), 0 4px 12px rgba(0,0,0,0.2);
      background: linear-gradient(135deg, var(--primary-rgba-20), var(--primary-rgba-12));
    }
    .anime-controls button:hover, .anime-controls input[type="text"]:hover {
      background: linear-gradient(135deg, var(--primary-rgba-25), var(--primary-rgba-15));
      border-color: var(--primary);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px var(--primary-rgba-25);
    }
    .anime-controls button:active {
      transform: translateY(0);
    }
    .anime-controls button {
        display: inline-flex;
        align-items: center;
    }
    .anime-controls button svg {
        margin-right: 6px;
        fill: var(--primary);
        transition: fill .3s ease;
    }
    .anime-controls button:hover svg {
        fill: var(--accent);
    }

    /* ─── Custom Dropdown Styles ─── */
    .custom-dropdown {
      position: relative;
      display: inline-block;
      min-width: 200px;
    }
    .custom-dropdown-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
      padding: 10px 16px;
      background: linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-05) 100%);
      border: 1px solid var(--primary-rgba-28);
      border-radius: 10px;
      color: #fff;
      cursor: pointer;
      transition: all .25s ease;
      position: relative;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,.04);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      font-size: 0.9rem;
    }
    .custom-dropdown-header::before {
      content: "";
      position: absolute;
      inset: 0;
      border-radius: 10px;
      padding: 1px;
      background: linear-gradient(45deg, var(--primary-rgba-60), var(--accent-rgba-40));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: .35;
      pointer-events: none;
      transition: opacity .25s ease;
    }
    .custom-dropdown-header::after {
      content: "";
      position: absolute;
      top: -120%;
      left: -40%;
      width: 60%;
      height: 340%;
      background: radial-gradient(ellipse at center, rgba(255,255,255,.08), transparent 60%);
      transform: rotate(25deg);
      opacity: 0;
      transition: opacity .3s ease, transform .3s ease;
      pointer-events: none;
    }
    .custom-dropdown-header:hover {
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      transform: translateY(-1px);
    }
    .custom-dropdown-header:hover::after {
      opacity: 1;
      transform: rotate(25deg) translateX(12px);
    }
    .custom-dropdown-header.active {
      border-color: var(--primary);
      background: linear-gradient(135deg, var(--primary-rgba-12) 0%, var(--accent-rgba-06) 100%);
      box-shadow: 0 6px 16px var(--primary-rgba-30), 0 0 0 1px var(--primary-rgba-14) inset;
    }
    .custom-dropdown-header.active::before {
      opacity: .6;
    }
    .custom-dropdown-header .dropdown-text {
      flex: 1;
      text-align: left;
      color: var(--accent-bright);
      font-weight: 500;
    }
    .custom-dropdown-header .dropdown-arrow {
      transition: transform .3s ease;
      color: var(--accent);
      display: flex;
      align-items: center;
    }
    .custom-dropdown-header.active .dropdown-arrow {
      transform: rotate(180deg);
      color: var(--accent-bright);
    }
    .custom-dropdown-menu {
      position: absolute;
      top: calc(100% + 8px);
      left: 0;
      right: 0;
      background: linear-gradient(135deg, var(--primary-rgba-12) 0%, var(--accent-rgba-06) 100%);
      border: 1px solid var(--primary-rgba-30);
      border-radius: 10px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,.05);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      opacity: 0;
      visibility: hidden;
      transform: translateY(-10px);
      transition: opacity .25s ease, transform .25s ease, visibility .25s ease;
      z-index: 1000;
      max-height: 300px;
      overflow-y: auto;
      overflow-x: hidden;
    }
    .custom-dropdown-menu::-webkit-scrollbar {
      width: 6px;
    }
    .custom-dropdown-menu::-webkit-scrollbar-track {
      background: var(--primary-rgba-10);
      border-radius: 10px;
    }
    .custom-dropdown-menu::-webkit-scrollbar-thumb {
      background: var(--primary-rgba-40);
      border-radius: 10px;
    }
    .custom-dropdown-menu::-webkit-scrollbar-thumb:hover {
      background: var(--primary-rgba-60);
    }
    .custom-dropdown-menu.active {
      opacity: 1;
      visibility: visible;
      transform: translateY(0);
    }
    .custom-dropdown-option {
      padding: 12px 16px;
      color: var(--accent-bright);
      cursor: pointer;
      transition: all .2s ease;
      font-size: 0.9rem;
      border-bottom: 1px solid var(--primary-rgba-20);
      position: relative;
    }
    .custom-dropdown-option:last-child {
      border-bottom: none;
    }
    .custom-dropdown-option::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, var(--primary), var(--accent));
      opacity: 0;
      transition: opacity .2s ease;
    }
    .custom-dropdown-option:hover {
      background: linear-gradient(135deg, var(--primary-rgba-20) 0%, var(--accent-rgba-10) 100%);
      color: #fff;
      padding-left: 20px;
    }
    .custom-dropdown-option:hover::before {
      opacity: 1;
    }
    .custom-dropdown-option.selected {
      background: linear-gradient(135deg, var(--primary-rgba-15) 0%, var(--accent-rgba-08) 100%);
      color: #fff;
      font-weight: 600;
    }
    .custom-dropdown-option.selected::before {
      opacity: 1;
    }


    .anime-card-content {
        display: flex;
        gap: 15px;
        align-items: flex-start; /* Align items to the top */
        position: relative; /* lets score chip float correctly */
    }
    .anime-card-cover {
        width: 65px;  /* From compact layout */
        height: 92px; /* From compact layout */
        object-fit: cover;
        border-radius: 6px; /* From compact layout */
        flex-shrink: 0;
        background-color: rgba(255,255,255,0.05); /* Placeholder bg */
    }
    .anime-card-details {
        flex-grow: 1;
        display: flex;
        flex-direction: column;
        gap: 4px;
        padding-right: 60px; /* Prevent overlap with score chip */
    }
    .anime-card-title {
        font-size: 1.05rem;
        font-weight: 600;
        color: #fff;
        margin-bottom: 4px;
        margin-top: 0;
        word-break: break-word;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        max-width: 100%;
    }
    .anime-card-details > div {
        display: flex;
        align-items: center;
        gap: 12px;
        flex-wrap: wrap;
        min-width: 0;
    }
    .anime-card-category {
  display: inline-flex;
  align-items: center;
  font-size: 0.82rem;
  font-weight: 600;
  padding: 2px 10px 2px 8px;
  border-radius: 999px;
  border: 1.5px solid var(--primary);
  background: var(--primary-rgba-10);
  color: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  min-width: 0;
  width: fit-content;
  max-width: 100%;
  box-shadow: none;
  letter-spacing: 0.5px;
  margin-bottom: 6px;
  margin-top: 2px;
  gap: 3px;
  transition: background 0.2s, color 0.2s, border 0.2s;
}

    .anime-card-rating-note-wrapper {
        margin-top: auto; 
    }
    .anime-card-rating {
        display: flex;
        align-items: center;
        margin-bottom: 4px; /* From compact layout */
        margin-top: 0;      /* From compact layout */
    }
    .score-chip {
      display: inline-flex;
      align-items: center;
      padding: 2px 10px 2px 8px;
      border-radius: 999px;
      font-size: 0.82rem;
      font-weight: 600;
      margin-left: 0;
      box-shadow: none;
      border: 1.5px solid #4CAF50;
      background: rgba(76,175,80,0.10);
      color: #fff;
      gap: 3px;
      min-width: 0;
      white-space: nowrap;
      transition: border 0.2s, background 0.2s, color 0.2s;
    }
    .score-chip .star-icon { 
        margin-right: 4px; 
        font-size: 1rem; 
        color: #FFD600;
        filter: drop-shadow(0 0 2px #FFD60088);
    }
    .score-chip.score-green { border-color: #4CAF50; background: rgba(76,175,80,0.10); color: #fff; }
    .score-chip.score-lightgreen { border-color: #8BC34A; background: rgba(139,195,74,0.10); color: #fff; }
    .score-chip.score-yellow { border-color: #FFEB3B; background: rgba(255,235,59,0.10); color: #fff; }
    .score-chip.score-orange { border-color: #FF9800; background: rgba(255,152,0,0.10); color: #fff; }
    .score-chip.score-red { border-color: #F44336; background: rgba(244,67,54,0.10); color: #fff; }
    .score-chip.score-none { display: none; }

    .anime-card-note {
        font-size: 0.78rem; /* From compact layout */
        color: var(--accent);
        opacity: .9;
        font-style: italic;
        margin-bottom: 4px; /* From compact layout */
        max-height: 40px;   /* From compact layout */
        overflow-y: auto; 
    }
     .anime-card-episodes {
        font-size: 0.75rem; /* From compact layout */
        color: var(--accent-bright);
        opacity: .8;
        margin-top: 2px; /* From compact layout */
    }

    /* ─── Anime Vote Buttons ─── */
    .anime-vote-buttons {
        position: absolute;
        left: 16px;
        top: 120px; /* Position under the image (16px padding + 100px image height) */
        display: flex;
        gap: 4px;
        align-items: center;
        z-index: 10;
    }

    .anime-vote-btn {
        background: rgba(0, 0, 0, 0.6);
        backdrop-filter: blur(4px);
        border: 1px solid var(--primary-rgba-30);
        color: var(--accent);
        padding: 3px 6px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 0.65rem;
        font-weight: 500;
        transition: all 0.2s ease;
        display: inline-flex;
        align-items: center;
        gap: 3px;
        flex: 0 0 auto;
        min-width: auto;
    }

    /* Mobile: position in bottom-right */
    @media (max-width: 768px) {
        .anime-vote-buttons {
            left: auto;
            top: auto;
            bottom: 8px;
            right: 8px;
        }
    }

    .anime-vote-btn:hover:not(:disabled) {
        background: var(--primary-rgba-40);
        border-color: var(--primary);
        color: #fff;
        transform: scale(1.05);
    }

    .anime-vote-btn:disabled {
        pointer-events: none;
        opacity: 0.7;
    }

    .anime-vote-btn.liked {
        background: var(--primary-rgba-60);
        border-color: var(--primary);
        color: #fff;
    }

    .anime-vote-btn.disliked {
        background: var(--primary-rgba-60);
        border-color: var(--primary);
        color: #fff;
    }

    .anime-vote-btn svg {
        width: 11px;
        height: 11px;
        fill: currentColor;
    }

    .anime-vote-btn span {
        font-size: 0.65rem;
        min-width: 10px;
        text-align: center;
    }

    /* Vote success/fail particle-like effects */
    .anime-vote-btn {
        position: relative;
        overflow: hidden;
    }

    .anime-vote-btn.vote-success::after,
    .anime-vote-btn.vote-fail::after {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: inherit;
        pointer-events: none;
        opacity: 0;
    }

    .anime-vote-btn.vote-success::after {
        background:
          radial-gradient(circle at 20% 20%, rgba(0,255,140,0.7) 0, transparent 40%),
          radial-gradient(circle at 80% 30%, rgba(0,255,200,0.6) 0, transparent 45%),
          radial-gradient(circle at 30% 80%, rgba(0,200,120,0.5) 0, transparent 45%);
        animation: vote-success-burst 0.6s ease-out forwards;
    }

    .anime-vote-btn.vote-fail::after {
        background:
          radial-gradient(circle at 20% 20%, rgba(255,80,80,0.7) 0, transparent 40%),
          radial-gradient(circle at 80% 30%, rgba(255,120,120,0.6) 0, transparent 45%),
          radial-gradient(circle at 30% 80%, rgba(255,60,60,0.5) 0, transparent 45%);
        animation: vote-fail-burst 0.6s ease-out forwards;
    }

    @keyframes vote-success-burst {
        0% {
            opacity: 0;
            transform: scale(0.6);
        }
        30% {
            opacity: 1;
            transform: scale(1.05);
        }
        100% {
            opacity: 0;
            transform: scale(1.4);
        }
    }

    @keyframes vote-fail-burst {
        0% {
            opacity: 0;
            transform: scale(0.6);
        }
        30% {
            opacity: 1;
            transform: scale(1.05);
        }
        100% {
            opacity: 0;
            transform: scale(1.4);
        }
    }

    /* Schedule Page Styles */
    #scheduleItemsContainer {
        display: flex;
        flex-direction: column;
        gap: 15px;
    }
    /* --- Schedule Legend --- */
    .schedule-legend {
      display: flex;
      flex-wrap: wrap;
      gap: 8px 14px;
      margin: 4px 0 18px 0;
      font-size: 0.78rem;
      color: var(--accent-bright);
      opacity: 0.9;
    }
    .schedule-legend-label {
      font-weight: 600;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      opacity: 0.7;
      margin-right: 4px;
    }
    .schedule-legend-pill {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--primary-rgba-30);
      background: var(--primary-rgba-10);
      font-weight: 500;
      white-space: nowrap;
    }
    .schedule-legend-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #fff;
      box-shadow: 0 0 6px currentColor;
    }
    .schedule-legend-pill.today    { color: var(--cat-platinum); }
    .schedule-legend-pill.tomorrow { color: var(--cat-average); }
    .schedule-legend-pill.soon     { color: var(--cat-overaverage); }
    .schedule-legend-pill.aired    { color: #8BC34A; }
    .schedule-legend-pill.past     { color: #757575; }
    /* --- NEW SCHEDULE CARD DESIGN --- */
    .schedule-item {
      background: linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-04) 100%);
      border: 1px solid var(--primary-rgba-20);
      border-radius: 16px;
      padding: 16px;
      display: flex;
      gap: 16px;
      align-items: flex-start;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    .schedule-item::before{
      content:'';
      position:absolute;
      inset:0;
      background:radial-gradient(circle at var(--mouse-x, 50%) var(--mouse-y, 50%), rgba(255,255,255,0.08) 0%, transparent 70%);
      opacity:0;
      transition:opacity .4s ease;
      pointer-events:none;
    }
    .schedule-item:hover::before{
      opacity:1;
    }
    .schedule-item:hover {
      transform: translateY(-6px) scale(1.01);
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      background: linear-gradient(135deg, var(--primary-rgba-12) 0%, var(--accent-rgba-06) 100%);
    }
    .schedule-item-cover {
      width: 70px;
      height: 100px;
      object-fit: cover;
      border-radius: 10px;
      flex-shrink: 0;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid var(--primary-rgba-20);
    }
    .schedule-item:hover .schedule-item-cover {
      transform: scale(1.08) rotate(2deg);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
      border-color: var(--primary-rgba-40);
    }
    .schedule-item-details {
      flex-grow: 1;
      min-width: 0;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .schedule-item-title {
      font-size: 1.1rem;
      font-weight: 600;
      color: #fff;
      margin-bottom: 6px;
      line-height: 1.3;
      text-align: left;
    }
    .schedule-item-time {
      font-size: 0.8rem;
      color: var(--accent);
      opacity: 0.8;
      margin-top: 4px;
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .schedule-time-icon {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      background: var(--primary-rgba-20);
      border: 1px solid var(--primary-rgba-40);
      flex-shrink: 0;
    }
    .schedule-time-icon svg {
      width: 18px;
      height: 18px;
      fill: var(--accent);
      opacity: 0.9;
    }
    /* --- EPISODE / STATUS META (Schedule, in-card) --- */
    .schedule-meta-row {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 4px;
      font-size: 0.8rem;
      color: var(--accent-bright);
      opacity: 0.9;
    }
    .schedule-meta-ep {
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
    }
    .schedule-meta-separator {
      opacity: 0.6;
    }
    .schedule-meta-status {
      font-weight: 500;
      opacity: 0.9;
    }
    .schedule-meta-status.status-today {
      color: var(--cat-platinum);
    }
    .schedule-meta-status.status-tomorrow {
      color: var(--cat-average);
    }
    .schedule-meta-status.status-soon {
      color: var(--cat-overaverage);
    }
    .schedule-meta-status.status-aired {
      color: #8BC34A;
    }
    /* --- AIRING TODAY ANIMATION (Schedule) --- */
    .schedule-item.airing-today {
      background: linear-gradient(135deg, rgba(0, 229, 255, 0.05) 0%, var(--primary-rgba-08) 100%);
      border-color: rgba(0, 229, 255, 0.3);
    }
    .schedule-item.airing-today::after {
      content: '';
      position: absolute;
      top: 5px;
      right: 5px;
      width: 12px;
      height: 12px;
      background: var(--cat-platinum);
      border-radius: 50%;
      animation: blink-dot 2s ease-in-out infinite;
    }
    /* --- RECENTLY AIRED ANIMATION (Schedule) --- */
    .schedule-item.status-aired { /* Note: This might conflict with general .status-aired if not careful */
      background: linear-gradient(135deg, rgba(76, 175, 80, 0.05) 0%, var(--primary-rgba-08) 100%);
      border-color: rgba(76, 175, 80, 0.3);
    }
    .schedule-item.status-aired::after {
      content: '';
      position: absolute;
      top: 5px;
      right: 5px;
      width: 12px;
      height: 12px;
      background: #4CAF50;
      border-radius: 50%;
      animation: blink-dot-green 2s ease-in-out infinite;
    }
    @keyframes blink-dot-green {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.3; transform: scale(0.8); }
    }
    @keyframes blink-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.3; transform: scale(0.8); }
    }
    /* --- Schedule meta row + countdown pill + day headers --- */
    .schedule-meta-row {
      display: flex;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 6px;
    }
    .schedule-countdown {
      padding: 2px 8px;
      border-radius: 999px;
      background: var(--primary-rgba-20);
      border: 1px solid var(--primary-rgba-40);
      font-size: 0.76rem;
      color: var(--accent-bright);
      letter-spacing: 0.03em;
    }
    .schedule-item-status.status-today + .schedule-countdown {
      background: rgba(0,229,255,0.16);
      border-color: rgba(0,229,255,0.6);
    }
    .schedule-item-status.status-tomorrow + .schedule-countdown {
      background: rgba(255,235,59,0.16);
      border-color: rgba(255,235,59,0.6);
    }
    .schedule-item-status.status-soon + .schedule-countdown {
      background: rgba(255,152,0,0.16);
      border-color: rgba(255,152,0,0.6);
    }
    .schedule-day-header {
      margin-top: 6px;
      margin-bottom: 2px;
      font-size: 0.83rem;
      font-weight: 600;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--accent-bright);
      opacity: 0.85;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .schedule-day-header::before {
      content: "";
      width: 32px;
      height: 1px;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(255,255,255,0.0), rgba(255,255,255,0.35));
    }
    /* --- MOBILE RESPONSIVENESS (Schedule) ---
       Schedule mobile rules live in the main `@media(max-width:768px)` block below. */
    /* ─── Loading & Empty States ─── */
    .empty-state{
      text-align:center;
      padding:40px;
      color:var(--accent);
      font-size:1.05rem;
      opacity:.95;
    }

    /* Premium loader card (used inside grids) */
    .loading-indicator{
      grid-column: 1 / -1; /* ensure it doesn't look like a tiny single card in the grid */
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:12px;
      text-align:center;
      padding:34px 26px;
      border-radius:18px;
      color:var(--accent-bright);
      background:linear-gradient(135deg, var(--primary-rgba-10) 0%, var(--accent-rgba-04) 100%);
      border:1px solid var(--primary-rgba-25);
      box-shadow:0 18px 40px rgba(0,0,0,0.25), inset 0 1px 0 rgba(255,255,255,0.06);
      backdrop-filter:blur(12px);
      -webkit-backdrop-filter:blur(12px);
      position:relative;
      overflow:hidden;
      min-height: 180px;
    }
    .loading-indicator::before{
      content:"";
      position:absolute;
      inset:-2px;
      background:
        radial-gradient(circle at 30% 20%, rgba(255,255,255,0.10), transparent 55%),
        radial-gradient(circle at 80% 60%, rgba(255,255,255,0.06), transparent 60%),
        linear-gradient(120deg, transparent 0%, rgba(255,255,255,0.06) 45%, transparent 60%);
      opacity:.9;
      transform:translateX(-30%);
      animation: loaderShimmer 2.2s ease-in-out infinite;
      pointer-events:none;
    }
    @keyframes loaderShimmer{
      0%,100%{ transform:translateX(-30%); opacity:.75; }
      50%{ transform:translateX(30%); opacity:1; }
    }
    .loading-indicator .loader-ring{
      width:58px;
      height:58px;
      border-radius:999px;
      border: 2px solid rgba(255,255,255,0.18);
      border-top-color: rgba(255,255,255,0.85);
      box-shadow: 0 0 0 1px rgba(0,0,0,0.2) inset, 0 8px 18px rgba(0,0,0,0.25);
      animation: spin 0.95s linear infinite;
      position:relative;
      z-index:1;
    }
    .loading-indicator .loader-title{
      font-family:"Bebas Neue","Oswald",sans-serif;
      font-size:1.6rem;
      letter-spacing:0.08em;
      text-transform:uppercase;
      color:#fff;
      position:relative;
      z-index:1;
      text-shadow:0 0 18px rgba(255,255,255,0.14);
    }
    .loading-indicator .loader-sub{
      font-size:0.9rem;
      opacity:.85;
      max-width: 520px;
      line-height:1.55;
      position:relative;
      z-index:1;
    }
    .loading-indicator .loader-dots{
      display:inline-flex;
      gap:6px;
      margin-top:2px;
      position:relative;
      z-index:1;
      opacity:.9;
    }
    .loading-indicator .loader-dots i{
      width:6px;
      height:6px;
      border-radius:50%;
      background:rgba(255,255,255,0.75);
      box-shadow:0 0 10px rgba(255,255,255,0.18);
      animation: dotPulse 1.1s ease-in-out infinite;
    }
    .loading-indicator .loader-dots i:nth-child(2){ animation-delay:.15s; opacity:.8; }
    .loading-indicator .loader-dots i:nth-child(3){ animation-delay:.3s; opacity:.7; }
    @keyframes dotPulse{
      0%,100%{ transform:translateY(0); opacity:.55; }
      50%{ transform:translateY(-4px); opacity:1; }
    }
    @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }


    /* ─── Mobile tweaks ─── */
    @media(max-width:768px){
      .container{padding:15px;}
      .main-content{padding:25px;}
      .accolades-container, .anime-grid-container, .gfx-grid{grid-template-columns:1fr !important;} /* This will override anime-grid-container's desktop columns */
      .tab-button { font-size: 0.9rem; padding: 10px 15px; }
      .anime-controls { flex-direction: column; align-items: stretch; }
      .anime-controls > div { margin-bottom: 10px; }
      .anime-card,
      .anime-card-content,
      .anime-card-details {
        width: 100% !important;
        max-width: 100% !important;
        box-sizing: border-box;
      }
      .anime-card {
        padding: 12px !important;
        margin: 0 !important;
      }
      .anime-card-content {
        flex-direction: row !important;
        align-items: center !important;
        text-align: left !important;
        gap: 12px !important;
      }
      .anime-card-cover {
        margin-bottom: 0 !important;
        width: 70px;
        height: 100px;
        flex-shrink: 0;
      }
      .anime-card-details {
        align-items: flex-start !important;
        padding-right: 0 !important;
      }
      .anime-card-title {
        max-width: 100%;
        white-space: normal !important;
        overflow: visible !important;
        text-overflow: unset !important;
      }
      .anime-card-category { align-self: flex-start; }
      .anime-card-rating { justify-content: flex-start; }
      /* Schedule mobile */
      .schedule-item {
        padding: 12px !important;
        gap: 12px !important;
        flex-direction: row !important;
        align-items: center !important;
        text-align: left !important;
      }
      .schedule-item-cover { 
        margin-bottom: 0 !important;
        width: 70px;
        height: 100px;
        flex-shrink: 0;
      }
      .schedule-item-title {
        font-size: 1rem;
      }
      .schedule-item-status,
      .schedule-item-ep {
        font-size: 0.7rem;
        padding: 2px 8px;
      }
    }

    @media (max-width: 980px){
      .hero-grid{ grid-template-columns: 1fr; }
      .hero-side{ justify-content:flex-start; }
      .hero-profile{ max-width: unset; }
      .home-layout{ grid-template-columns: 1fr; }
      .home-stats{ grid-template-columns: 1fr; }
    }

    /* ─── Category/Status Chips (Anime & Schedule) - Shared Styles ─── */
    .anime-card-category, .schedule-item-status { /* Shared base style */
      display: inline-flex;
      align-items: center;
      font-size: 0.82rem; /* Base size */
      font-weight: 600;
      padding: 2px 10px 2px 8px;
      border-radius: 999px;
      border: 1.5px solid var(--primary); /* Default border */
      background: var(--primary-rgba-10); /* Default background */
      color: #fff; /* Default text color */
      white-space: nowrap; /* For anime-card-category, this is overridden by more specific rule if needed */
      overflow: hidden;    /* For anime-card-category, this is overridden by more specific rule if needed */
      text-overflow: ellipsis;
      min-width: 0;
      max-width: 100%; /* For anime-card-category, this is overridden by more specific rule if needed */
      box-shadow: none;
      letter-spacing: 0.5px;
      margin-bottom: 6px;
      margin-top: 2px;
      gap: 3px;
      transition: background 0.2s, color 0.2s, border 0.2s;
    }
    /* Category color overrides - only border/background color changes, not style */
    .anime-card-category.cat-platinum-masterpiece { background: rgba(0,229,255,0.10); border-color: var(--cat-platinum); }
    .anime-card-category.cat-overaveragely-enjoyable { background: rgba(255,165,0,0.10); border-color: var(--cat-overaverage); }
    .anime-card-category.cat-average-enjoyability { background: rgba(255,235,59,0.10); border-color: var(--cat-average); }
    .anime-card-category.cat-unfinished--disinterested { background: rgba(255,82,82,0.10); border-color: var(--cat-unfinished); }
    .anime-card-category.cat-planned-to-watch { background: rgba(234,128,252,0.10); border-color: var(--cat-planned); }

    /* Schedule status color overrides - more specific selectors */
    .schedule-item-status.status-today { background: rgba(0,229,255,0.13); border-color: var(--cat-platinum); color: #fff; font-size: 0.75rem; /* Resetting from shared if different */ }
    .schedule-item-status.status-tomorrow { background: rgba(255,235,59,0.13); border-color: var(--cat-average); color: #fff; font-size: 0.75rem; }
    .schedule-item-status.status-soon { background: rgba(255,165,0,0.13); border-color: var(--cat-overaverage); color: #fff; font-size: 0.75rem; }
    .schedule-item-status.status-aired { background: rgba(139,195,74,0.13); border-color: #8BC34A; color: #fff; font-size: 0.75rem; }
    .schedule-item-status.status-past { background: rgba(117,117,117,0.13); border-color: #757575; color: #fff; font-size: 0.75rem; }

    /* ─── Anime Card Compact Layout ─── */
    .anime-card {
      padding: 14px 16px;
      min-height: unset;
      border-radius: 12px;
      position: relative;
      /* ADDED for filter/sort animations */
      animation: cardEntry 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      opacity: 0;
    }
    /* .anime-card-content defined above with common styles */
    /* .anime-card-cover defined above with common styles */
    /* .anime-card-details defined above with common styles */
    /* .anime-card-title defined above with common styles */
    /* .anime-card-rating defined above with common styles */
    /* .anime-card-note defined above with common styles */
    /* .anime-card-episodes defined above with common styles */

    .anime-card-score-topright {
      position:absolute; /* From quick card-layout fixes */
      top:14px;          /* From quick card-layout fixes - sit under the card border */
      right:16px;        /* From quick card-layout fixes */
      transform:none;    /* From quick card-layout fixes - kill the 50%-centre transform */
      z-index: 2;
    }

    /* ─── "episodes" chip ─── */
    .episodes-chip{
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 12px;
      background: rgba(44,130,127,.25);          /* teal-ish fill */
      border: 1px solid rgba(44,130,127,.6);
      border-radius: 8px;
      font-size: .8rem;
      font-weight: 600;
      white-space: nowrap;
      color: var(--accent-bright);
      flex-shrink:0; /* From quick card-layout fixes - stop the new episodes-chip from shrinking */
    }
    .episodes-chip svg{
      width: 14px;
      height: 14px;
      fill: currentColor;
    }

    /* ADDED Keyframes and Stagger for Anime Cards */
    @keyframes cardEntry {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* ADDED Keyframes for Ranked Anime Cards */
    @keyframes pulse-gold {
      0%, 100% { box-shadow: 0 0 0 0 rgba(255, 215, 0, 0); }
      50% { box-shadow: 0 0 12px 4px rgba(255, 215, 0, 0.5); }
    }
    @keyframes pulse-silver {
      0%, 100% { box-shadow: 0 0 0 0 rgba(192, 192, 192, 0); }
      50% { box-shadow: 0 0 12px 4px rgba(192, 192, 192, 0.5); }
    }
    @keyframes pulse-bronze {
      0%, 100% { box-shadow: 0 0 0 0 rgba(205, 127, 50, 0); }
      50% { box-shadow: 0 0 12px 4px rgba(205, 127, 50, 0.5); }
    }

    /* Stagger animation */
    .anime-card:nth-child(n) { /* Applies to all anime-card elements */
      animation-delay: calc(0.05s * var(--card-index, 1));
    }

    /* ADDED Styles for Ranked Anime Cards */
    .anime-card.rank-gold {
      border-color: rgba(255, 215, 0, 0.25); /* Subtle Gold */
    }
    .anime-card.rank-silver {
        border-color: rgba(192, 192, 192, 0.25); /* Subtle Silver */
    }
    .anime-card.rank-bronze {
        border-color: rgba(205, 127, 50, 0.25); /* Subtle Bronze */
    }

    .anime-faq {
      text-align: center;
      color: var(--accent);
      margin-bottom: 18px;
      font-size: 0.78rem;
      max-width: 600px;
      margin-left: auto;
      margin-right: auto;
      opacity: 0.9;
      font-style: italic;
    }

    /* ─── Anime category legend ─── */
    .anime-category-legend {
      display: flex;
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 8px;
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.12em;
      opacity: 0.85;
    }
    .anime-category-pill {
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid var(--primary-rgba-25);
      background: radial-gradient(circle at 0 0, rgba(255,255,255,0.08), transparent 60%);
      backdrop-filter: blur(6px);
      -webkit-backdrop-filter: blur(6px);
      box-shadow: 0 0 0 1px rgba(255,255,255,0.02);
      display: inline-flex;
      align-items: center;
      gap: 6px;
      position: relative;
      overflow: hidden;
    }
    .anime-category-pill::before {
      content: "";
      width: 6px;
      height: 6px;
      border-radius: 50%;
      background: currentColor;
      box-shadow: 0 0 6px currentColor;
      flex-shrink: 0;
    }
    .anime-category-pill.platinum { color: var(--cat-platinum); }
    .anime-category-pill.overaverage { color: var(--cat-overaverage); }
    .anime-category-pill.average { color: var(--cat-average); }
    .anime-category-pill.unfinished { color: var(--cat-unfinished); }
    .anime-category-pill.planned { color: var(--cat-planned); }

    .tab-sections-wrapper {
      position: relative;
      transition: height 0.6s ease;
      /* overflow: hidden; */
      /* padding-bottom: 32px; */
      overflow: visible;
      min-height: 60vh;
    }
    /* .accolades-section opacity transitions are handled by `.fade-section` */
    .fade-section {
      opacity: 0;
      transition: opacity 0.6s cubic-bezier(0.4,0,0.2,1);
      will-change: opacity;
    }
    .fade-section.show {
      opacity: 1;
    }
    .hidden {
      position: absolute !important;
      left: 0;
      width: 100%;
      visibility: hidden !important;
      pointer-events: none !important;
      z-index: 0;
    }
    .fade-section.show {
      position: static !important;
      visibility: visible !important;
      pointer-events: auto !important;
      z-index: 1;
    }

    /* --- COMPACT TOPBAR MODE (non-home) --- */
    .container.compact-topbar {
      min-height: 0vh !important;
      padding-top: 0 !important;
    }
    .category-tabs.compact-topbar {
      margin-top: 18px !important;
      box-shadow: none !important;
      background: transparent !important;
      /* position: sticky; */
      /* top: 0; */
      /* z-index: 10; */
    }
    .category-tabs:not(.compact-topbar) {
      background: none !important;
      box-shadow: none !important;
      margin-top: 0 !important;
    }

    /* ─────────────  ANIME CARD PREMIUM REDESIGN  ───────────── */
    .anime-card-category {
      display: inline-flex;
      align-items: center;
      font-size: 0.75rem;
      font-weight: 500;
      padding: 4px 12px;
      border-radius: 6px;
      border: none;
      background: linear-gradient(135deg, var(--cat-color) 0%, var(--cat-color-dark) 100%);
      color: #fff;
      letter-spacing: 0.025em;
      text-transform: uppercase;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15), inset 0 1px 0 rgba(255,255,255,0.1);
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }
    .anime-card-category::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
      transition: none;
      pointer-events: none;
    }
    .anime-card:hover .anime-card-category::before {
      left: 100%;
      transition: left 0.5s;
    }
    /* Remove the reverse shine effect on hover off */
    .anime-card:not(:hover) .anime-card-category::before {
      left: -100%;
      transition: none;
    }
    .cat-platinum-masterpiece { 
      --cat-color: #00E5FF;
      --cat-color-dark: #00B8D4;
    }
    .cat-overaveragely-enjoyable { 
      --cat-color: #FFA500;
      --cat-color-dark: #F57C00;
    }
    .cat-average-enjoyability { 
      --cat-color: #FFEB3B;
      --cat-color-dark: #FBC02D;
    }
    .cat-unfinished--disinterested { 
      --cat-color: #FF5252;
      --cat-color-dark: #D32F2F;
    }
    .cat-planned-to-watch { 
      --cat-color: #EA80FC;
      --cat-color-dark: #BA68C8;
    }

    .episodes-chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 10px 3px 8px;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
      white-space: nowrap;
      color: #fff;
      position: relative;
      transition: all 0.3s ease;
    }
    .episodes-chip svg {
      width: 12px;
      height: 12px;
      fill: var(--accent);
      filter: drop-shadow(0 0 3px var(--accent));
      transition: transform 0.3s ease;
    }
    .episodes-chip::after {
      content: '';
      position: absolute;
      inset: -1px;
      border-radius: 20px;
      padding: 1px;
      background: linear-gradient(45deg, var(--primary), var(--accent));
      -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
      -webkit-mask-composite: xor;
      mask-composite: exclude;
      opacity: 0;
      transition: opacity 0.3s ease;
    }
    .anime-card:hover .episodes-chip::after {
      opacity: 0.5;
    }
    .anime-card:hover .episodes-chip svg {
      transform: none;
    }

    .score-chip {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 3px 10px 3px 8px;
      background: rgba(255,255,255,0.05);
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255,255,255,0.1);
      border-radius: 20px;
      font-size: 0.7rem;
      font-weight: 500;
      white-space: nowrap;
      color: #fff;
      transition: all 0.3s ease;
    }

    .score-chip .star-icon {
      font-size: .9rem;
      color: #FFD600;
      filter: drop-shadow(0 0 2px #FFD600);
      line-height: 1;
    }

    .score-chip.score-green {
      background: rgba(76,175,80,0.15);
      border-color: rgba(76,175,80,0.5);
    }
    .score-chip.score-lightgreen {
      background: rgba(139,195,74,0.15);
      border-color: rgba(139,195,74,0.5);
    }
    .score-chip.score-yellow {
      background: rgba(255,235,59,0.15);
      border-color: rgba(255,235,59,0.5);
    }
    .score-chip.score-orange {
      background: rgba(255,152,0,0.15);
      border-color: rgba(255,152,0,0.5);
    }
    .score-chip.score-red {
      background: rgba(244,67,54,0.15);
      border-color: rgba(244,67,54,0.5);
    }
    .score-chip.score-none { display: none; }

    .anime-card {
      padding: 16px;
      min-height: unset;
      border-radius: 16px;
      background: linear-gradient(135deg, var(--primary-rgba-05) 0%, var(--accent-rgba-03) 100%);
      backdrop-filter: blur(10px);
      border: 1px solid var(--primary-rgba-20);
      position: relative;
      animation: cardEntry 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      opacity: 0;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .anime-card:hover {
      transform: translateY(-8px) scale(1.02);
      border-color: var(--primary);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      background: linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-05) 100%);
    }
    .anime-card-details {
      flex-grow: 1;
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding-right: 0;
    }
    .anime-card-title {
      font-size: 1.1rem;
      font-weight: 700;
      color: #fff;
      margin-bottom: 2px;
      line-height: 1.4;
      text-shadow: 0 1px 3px rgba(0,0,0,0.3);
    }
    .anime-card-cover {
      width: 70px;
      height: 100px;
      object-fit: cover;
      border-radius: 8px;
      flex-shrink: 0;
      background-color: rgba(255,255,255,0.05);
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
      transition: all 0.3s ease;
    }
    .anime-card:hover .anime-card-cover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(0,0,0,0.4);
    }
    .anime-card-meta {
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
      margin: 4px 0;
    }
    /* ─── Games Accordion ─── */
    .games-accordion { max-width: 1100px; margin: 10px auto 0 auto; text-align: left; }
    .accordion-header { width: 100%; display: flex; justify-content: space-between; align-items: center; gap: 12px; padding: 16px 18px; background: linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-05) 100%); border: 1px solid var(--primary-rgba-28); border-radius: 14px; color: #fff; cursor: pointer; transition: border-color .25s ease, box-shadow .25s ease, background .25s ease, transform .25s ease; position: relative; overflow: hidden; box-shadow: 0 6px 14px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.04); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); }
    .accordion-header::before { content: ""; position: absolute; inset: 0; border-radius: 14px; padding: 1px; background: linear-gradient(45deg, var(--primary-rgba-60), var(--accent-rgba-40)); -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0); -webkit-mask-composite: xor; mask-composite: exclude; opacity: .35; pointer-events: none; transition: opacity .25s ease; }
    .accordion-header::after { content: ""; position: absolute; top: -120%; left: -40%; width: 60%; height: 340%; background: radial-gradient(ellipse at center, rgba(255,255,255,.08), transparent 60%); transform: rotate(25deg); opacity: 0; transition: opacity .3s ease, transform .3s ease; pointer-events: none; }
    .accordion-header:hover { border-color: var(--primary); box-shadow: 0 4px 12px rgba(0,0,0,0.2); transform: translateY(-1px); }
    .accordion-header:hover::after { opacity: 1; transform: rotate(25deg) translateX(12px); }
    .accordion-header .accordion-left { display: inline-flex; align-items: center; gap: 10px; }
    .accordion-header .accordion-logo { display: inline-flex; align-items: center; justify-content: center; width: 28px; height: 28px; border-radius: 8px; background: var(--primary-rgba-12); border: 1px solid var(--primary-rgba-30); box-shadow: inset 0 1px 0 rgba(255,255,255,.06); }
    .accordion-header .accordion-logo svg { color: var(--primary); filter: drop-shadow(0 0 3px var(--primary-rgba-50)); }
    .accordion-header svg { transition: transform .3s ease, color .25s ease; transform: rotate(0deg); color: var(--accent); }
    .accordion-header[aria-expanded="true"] { border-color: var(--primary); background: linear-gradient(135deg, var(--primary-rgba-12) 0%, var(--accent-rgba-06) 100%); box-shadow: 0 16px 32px var(--primary-rgba-30), 0 0 0 1px var(--primary-rgba-14) inset; }
    .accordion-header[aria-expanded="true"]::before { opacity: .6; }
    .accordion-header[aria-expanded="true"] svg { transform: rotate(180deg); color: var(--accent-bright); }
    .accordion-header:focus-visible { outline: none; box-shadow: 0 0 0 2px var(--primary-rgba-50), 0 0 0 4px var(--accent-rgba-25); }
    .accordion-header span {
      font-size: 1.05rem;
      font-weight: 800;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: #fff; /* fallback */
      background: linear-gradient(45deg, var(--primary-dark), var(--primary), var(--accent));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      text-shadow: 0 1px 2px rgba(0,0,0,.25);
    }
    .accordion-header:hover span { filter: drop-shadow(0 0 6px var(--accent-rgba-25)); }
    .accordion-header[aria-expanded="true"] span {
      background: linear-gradient(45deg, var(--primary), var(--accent), var(--accent-bright));
      -webkit-background-clip: text;
      background-clip: text;
      -webkit-text-fill-color: transparent;
      filter: drop-shadow(0 0 8px var(--accent-rgba-40));
    }
    .accordion-content { overflow: hidden; max-height: 0; transition: max-height .4s ease; }
    .accordion-content.open { overflow: visible; }
    /* Animate cards inside accordion */
    .accordion-content .accolade-card { opacity: 0; transform: translateY(10px); }
    .accordion-content.open .accolade-card { animation: cardEntry 0.35s cubic-bezier(0.4,0,0.2,1) forwards; }
    .accordion-content.open.closing .accolade-card {
        animation: none; /* Override entry animation */
        opacity: 0;
        transform: translateY(10px);
        transition: opacity 0.2s ease, transform 0.2s ease;
    }
    .accordion-content.closing .accolade-card { animation: none !important; opacity: 0; transform: translateY(10px); transition: opacity .22s ease, transform .22s ease; }
    .accordion-content .accolades-container { padding-top: 14px; }
  </style>
</head>
<body>

  <!-- ───────────  INTRO SCREEN  ─────────── -->
  <div class="intro-overlay" id="introOverlay">
    <!-- Background orbs -->
    <div class="intro-orb"></div>
    <div class="intro-orb"></div>
    <div class="intro-orb"></div>
    
    <!-- Floating particles -->
    <div class="intro-particle" style="left:15%;top:20%;animation-delay:0s;"></div>
    <div class="intro-particle" style="left:25%;top:30%;animation-delay:0.5s;"></div>
    <div class="intro-particle" style="left:75%;top:25%;animation-delay:1s;"></div>
    <div class="intro-particle" style="left:85%;top:35%;animation-delay:1.5s;"></div>
    <div class="intro-particle" style="left:50%;top:15%;animation-delay:2s;"></div>
    <div class="intro-particle" style="left:35%;top:40%;animation-delay:2.5s;"></div>
    <div class="intro-particle" style="left:65%;top:45%;animation-delay:3s;"></div>
    <div class="intro-particle" style="left:45%;top:50%;animation-delay:3.5s;"></div>
    
    <div class="intro-content">
      <div class="intro-logo">
        <svg viewBox="0 0 100 100">
          <defs>
            <linearGradient id="purpleGradient" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="#ffffff" />
              <stop offset="50%" stop-color="#e0e0e0" />
              <stop offset="100%" stop-color="#ffffff" />
            </linearGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>
          <text x="50" y="70" font-family="Arial, sans-serif" font-size="60" font-weight="bold" text-anchor="middle" fill="url(#purpleGradient)" filter="url(#glow)">S</text>
        </svg>
      </div>
      <h1 class="intro-text">shemxz</h1>
    </div>
  </div>

  <!-- ───────────  MAIN  ─────────── -->
  <div class="container" id="mainContainer">
    <div id="heroHomeWrapper" class="hero-home-wrapper fade-section hidden">
      <div class="hero-section">
        <div class="hero-shell">
          <div class="hero-grid">
            <div>
              <div class="hero-kicker"><span class="dot" aria-hidden="true"></span> Personal hub</div>
              <div class="hero-title">
                <h1 class="name" data-text="shemxz">shemxz</h1>
              </div>
              <p class="typing" id="typing"></p>

              <div class="hero-actions">
                <button type="button" class="hero-action" data-nav-category="animeList">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 10h-2.5v2.5h-3V10H8V7h2.5V4.5h3V7H16v3z"/></svg>
                  Anime List
                </button>
                <button type="button" class="hero-action" data-nav-category="schedule">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
                  Schedule
                </button>
                <button type="button" class="hero-action" data-nav-category="gfx">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 19V5c0-1.1-.9-2-2-2H5C3.89 3 3 3.9 3 5v14c0 1.11.89 2 2 2h14c1.1 0 2-.89 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5zM7 8c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
                  GFX
                </button>
              </div>
            </div>

            <div class="hero-side">
              <div class="hero-profile">
                <div class="hero-profile-inner">
                  <div class="hero-avatar" aria-hidden="true">S</div>
                  <div class="hero-meta">
                    <p class="label">Currently</p>
                    <p class="value">Building & shipping</p>
                    <p class="sub">Use the tabs below to explore everything.</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- TABS -->
    <div class="category-tabs">
      <button class="tab-button active" data-category="home">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
          <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M13.4,13.8l-3.6,2.9c-1.4,1.1-2.3,2.9-2.3,4.7v18.1c0,1.1,0.9,2,2,2h20"/>
          <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M35,41.5h3.5c1.1,0,2-0.9,2-2V21.4c0-1.8-0.8-3.6-2.3-4.7L24.6,6c-0.4-0.3-0.9-0.3-1.2,0l-4.6,3.6"/>
          <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" stroke-width="3" d="M18.5,35.7v-8.2c0-0.6,0.4-1,1-1h8.9c0.6,0,1,0.4,1,1v14"/>
        </svg>
        Home
      </button>
      <button class="tab-button" data-category="animeList">
          <svg width="24" height="24" viewBox="0 0 24 24"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 10h-2.5v2.5h-3V10H8V7h2.5V4.5h3V7H16v3z"/></svg>
          Anime List
      </button>
      <button class="tab-button" data-category="schedule">
          <svg width="24" height="24" viewBox="0 0 24 24"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
          Schedule
      </button>
      <button class="tab-button" data-category="games">
        <svg width="24" height="24" viewBox="0 0 24 24"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
        Games
      </button>
      <button class="tab-button" data-category="gfx">
        <svg width="24" height="24" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M21 19V5c0-1.1-.9-2-2-2H5C3.89 3 3 3.9 3 5v14c0 1.11.89 2 2 2h14c1.1 0 2-.89 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5zM7 8c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
        GFX
      </button>
    </div>
    <div class="tab-sections-wrapper" id="tabSectionsWrapper">
      <!-- ───────────  HOME  ─────────── -->
      <div id="homeSection" class="accolades-section fade-section hidden">
        <div class="home-layout">
          <div class="home-stack">
            <div class="home-card" style="--card-index: 1;">
              <h3>
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                About
              </h3>
              <p>
                This is my personal hub — socials, what I’m watching, upcoming episodes, and a GFX gallery.
                Everything is designed to be fast, clean, and actually pleasant to use.
              </p>
              <p class="muted" style="margin-top:10px;">
                Tip: use the “Featured” shortcuts to jump straight into the best sections.
              </p>
            </div>

            <div class="home-card" style="--card-index: 2;">
              <h3>
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM11 13H8v3H6v-3H3v-2h3V8h2v3h3v2z"/></svg>
                Links
              </h3>
              <p class="muted">All the main places you can find me.</p>
              <div class="home-links" id="homeLinks">
                <a class="home-link-tile" href="https://www.roblox.com/users/7208356029/profile" target="_blank" rel="noopener noreferrer">
                  <span class="home-link-icon" aria-hidden="true">
                    <svg viewBox="0 0 50 50"><path d="M12.125 1.998a1 1 0 00-.926.746l-9.166 34.832a1 1 0 00.713 1.222l34.834 9.168a1 1 0 001.222-.713l9.166-34.834a1 1 0 00-.713-1.222L12.42 2.03a1 1 0 00-.295-.033zm9.375 17l9.5 2.5-2.5 9.5-9.5-2.5 2.5-9.5z"/></svg>
                  </span>
                  <span class="home-link-text">
                    <p class="home-link-title">Roblox</p>
                    <p class="home-link-sub">p3rfectscore · Main account</p>
                  </span>
                  <span class="home-link-cta" aria-hidden="true">Open →</span>
                </a>

                <a class="home-link-tile" href="http://discordapp.com/users/1236388693510721568" target="_blank" rel="noopener noreferrer">
                  <span class="home-link-icon" aria-hidden="true">
                    <svg viewBox="0 0 24 24"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
                  </span>
                  <span class="home-link-text">
                    <p class="home-link-title">Discord</p>
                    <p class="home-link-sub">shemxz · DM friendly</p>
                  </span>
                  <span class="home-link-cta" aria-hidden="true">Open →</span>
                </a>

                <a class="home-link-tile" href="https://open.spotify.com/user/31wgn7lokowcfeo2mzvysdxavcoe" target="_blank" rel="noopener noreferrer">
                  <span class="home-link-icon" aria-hidden="true">
                    <svg viewBox="0 0 50 50"><path d="M25.009,1.982C12.322,1.982,2,12.304,2,24.991S12.322,48,25.009,48s23.009-10.321,23.009-23.009S37.696,1.982,25.009,1.982z"/></svg>
                  </span>
                  <span class="home-link-text">
                    <p class="home-link-title">Spotify</p>
                    <p class="home-link-sub">bankai · Music & playlists</p>
                  </span>
                  <span class="home-link-cta" aria-hidden="true">Open →</span>
                </a>
              </div>
            </div>
          </div>

          <div class="home-stack">
            <div class="home-card" style="--card-index: 3;">
              <h3>
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                Featured
              </h3>
              <p class="muted">Shortcuts to the best parts of the site.</p>
              <div class="home-nav-grid">
                <button type="button" class="home-nav-btn" data-nav-category="animeList">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"/></svg>
                  <div>
                    <p class="title">Anime List</p>
                    <p class="desc">My full catalog + ratings + people’s choice votes.</p>
                  </div>
                </button>
                <button type="button" class="home-nav-btn" data-nav-category="schedule">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11z"/></svg>
                  <div>
                    <p class="title">Schedule</p>
                    <p class="desc">Upcoming episodes + recently aired, in your local time.</p>
                  </div>
                </button>
                <button type="button" class="home-nav-btn" data-nav-category="gfx">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 19V5c0-1.1-.9-2-2-2H5C3.89 3 3 3.9 3 5v14c0 1.11.89 2 2 2h14c1.1 0 2-.89 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/></svg>
                  <div>
                    <p class="title">GFX Gallery</p>
                    <p class="desc">Full-screen lightbox + like/dislike votes.</p>
                  </div>
                </button>
                <button type="button" class="home-nav-btn" data-nav-category="games">
                  <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2z"/></svg>
                  <div>
                    <p class="title">Games</p>
                    <p class="desc">Awards + highlights, organized and animated cleanly.</p>
                  </div>
                </button>
              </div>
            </div>

            <div class="home-card" style="--card-index: 4;">
              <h3>
                <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M3 13h2v-2H3v2zm4 6h2V5H7v14zm4 0h2V9h-2v10zm4 0h2V3h-2v16zm4-6h2v-2h-2v2z"/></svg>
                Stats
              </h3>
              <p class="muted">Live counters and quick info.</p>
              <div class="home-stats">
                <div class="home-stat">
                  <p class="k">Total visitors</p>
                  <p class="v"><span id="visitorCount">0</span></p>
                  <p class="s"><span class="visitor-message" id="visitorMessage">6k soon right guys</span></p>
                </div>
                <div class="home-stat">
                  <p class="k">Local time</p>
                  <p class="v" id="localTime">—</p>
                  <p class="s">Your timezone</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ───────────  ANIME LIST  ─────────── -->
      <div id="animeListSection" class="accolades-section fade-section hidden">
        <h2 class="section-title" data-glitch="My Anime List">
            <svg width="32" height="32" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:10px;fill:var(--primary);"><path d="M4 6H2v14c0 1.1.9 2 2 2h14v-2H4V6zm16-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm-2 10h-2.5v2.5h-3V10H8V7h2.5V4.5h3V7H16v3z"/></svg>
            My Anime List
        </h2>
        <div class="anime-faq" style="text-align:center;color:var(--accent);margin-bottom:18px;font-size:1.05rem;max-width:600px;margin-left:auto;margin-right:auto;">
          A catalog of every anime I've watched, with my personal ratings and the categories
        </div>
        <div class="anime-category-legend">
          <span class="anime-category-pill total">Total - ...</span>
          <span class="anime-category-pill platinum" data-category-name="Platinum Masterpiece">Platinum - ...</span>
          <span class="anime-category-pill overaverage" data-category-name="Overaveragely Enjoyable">Over Average - ...</span>
          <span class="anime-category-pill average" data-category-name="Average Enjoyability">Average - ...</span>
          <span class="anime-category-pill unfinished" data-category-name="Unfinished / Disinterested">Unfinished - ...</span>
          <span class="anime-category-pill planned" data-category-name="Planned to Watch">Planned - ...</span>
        </div>
        <div class="anime-controls">
            <div>
                <label>Filter:</label>
                <div class="custom-dropdown" id="categoryFilterDropdown">
                    <div class="custom-dropdown-header" id="categoryFilterHeader" data-value="All">
                        <span class="dropdown-text">All Categories</span>
                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"/></svg>
                    </div>
                    <div class="custom-dropdown-menu" id="categoryFilterMenu">
                        <div class="custom-dropdown-option selected" data-value="All">All Categories</div>
                        <!-- Options will be populated by JS -->
                    </div>
                </div>
            </div>
            <div>
                <label for="searchBar">Search:</label>
                <input type="text" id="searchBar" placeholder="Type to search...">
            </div>
            <div>
                <label>Sort:</label>
                <div class="custom-dropdown" id="sortOrderDropdown">
                    <div class="custom-dropdown-header" id="sortOrderHeader" data-value="rating_desc">
                        <span class="dropdown-text">Rating (High to Low)</span>
                        <svg class="dropdown-arrow" width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"/></svg>
                    </div>
                    <div class="custom-dropdown-menu" id="sortOrderMenu">
                        <div class="custom-dropdown-option selected" data-value="rating_desc">Rating (High to Low)</div>
                        <div class="custom-dropdown-option" data-value="az">Title (A-Z)</div>
                        <div class="custom-dropdown-option" data-value="za">Title (Z-A)</div>
                        <div class="custom-dropdown-option" data-value="rating_asc">Rating (Low to High)</div>
                        <div class="custom-dropdown-option" data-value="peoples_choice">People's Choice (Most Liked)</div>
                        <div class="custom-dropdown-option" data-value="peoples_disliked">People's Choice (Most Disliked)</div>
                    </div>
                </div>
            </div>
        </div>
        <div id="animeGridContainer" class="anime-grid-container">
            <!-- Anime cards will be injected here -->
            <div class="loading-indicator" id="animeListLoading">
                <div class="loader-ring" aria-hidden="true"></div>
                <div class="loader-title">Loading Anime List</div>
                <div class="loader-sub">
                  <span class="loader-message-text">Loading your favorite anime...</span>
                  <span class="loader-dots" aria-hidden="true"><i></i><i></i><i></i></span>
                </div>
            </div>
        </div>
      </div>

      <!-- ───────────  SCHEDULE  ─────────── -->
      <div id="scheduleSection" class="accolades-section fade-section hidden">
        <h2 class="section-title" data-glitch="Upcoming Episodes">
            <svg width="32" height="32" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:10px;fill:var(--primary);"><path d="M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"/></svg>
            Upcoming Episodes
        </h2>
        <div class="anime-controls" style="justify-content: flex-end;">
             <button id="refreshScheduleBtn">
                <svg width="18" height="18" viewBox="0 0 24 24"><path d="M17.65 6.35A7.958 7.958 0 0 0 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"/></svg>
                Refresh Schedule
            </button>
        </div>
        <div class="schedule-legend">
          <span class="schedule-legend-label">Statuses</span>
          <span class="schedule-legend-pill aired">
            <span class="schedule-legend-dot"></span> Recently Aired
          </span>
          <span class="schedule-legend-pill today">
            <span class="schedule-legend-dot"></span> Airs Today
          </span>
          <span class="schedule-legend-pill tomorrow">
            <span class="schedule-legend-dot"></span> Tomorrow
          </span>
          <span class="schedule-legend-pill soon">
            <span class="schedule-legend-dot"></span> Coming Up (2+ days)
          </span>
        </div>
        <div id="scheduleItemsContainer">
            <!-- Schedule items will be injected here -->
             <div class="loading-indicator" id="scheduleLoading">
                <svg viewBox="0 0 50 50"><circle cx="25" cy="25" r="20" fill="none" stroke-width="5" stroke="currentColor" stroke-linecap="round" pathLength="1" stroke-dasharray="0.5 0.5"></circle></svg>
                Loading Schedule...
            </div>
        </div>
      </div>


      <!-- ───────────  GAMES  ─────────── -->
      <div id="gamesSection" class="accolades-section fade-section hidden">
        <h2 class="section-title" data-glitch="Game Awards">
          <svg width="32" height="32" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:10px;fill:var(--primary);"><path d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
          Game Awards
        </h2>

        <div class="games-accordion">
          <button class="accordion-header" aria-expanded="false">
            <div class="accordion-left">
              <span class="accordion-logo">
                <svg width="20" height="20" viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                  <g transform="translate(0,64) scale(0.1,-0.1)" fill="currentColor" stroke="none">
                    <path d="M250 570 c-39 -11 -83 -36 -104 -59 -19 -21 -19 -21 15 -21 20 0 69
            -18 123 -45 83 -42 147 -57 160 -36 8 13 -48 96 -85 124 -45 34 -79 45 -109
            37z"></path>
                    <path d="M391 542 c24 -22 53 -56 64 -76 11 -20 24 -35 30 -33 15 5 18 53 5
            76 -12 23 -67 54 -115 65 -28 7 -28 6 16 -32z"></path>
                    <path d="M117 463 c-23 -6 -46 -52 -53 -107 l-6 -44 73 -12 c73 -12 269 -9
            317 6 19 5 22 13 20 37 -3 29 -4 30 -63 32 -50 1 -74 9 -148 48 -86 45 -102
            50 -140 40z"></path>
                    <path d="M526 447 c-3 -14 -13 -32 -21 -40 -10 -11 -13 -25 -9 -46 7 -35 13
            -37 54 -16 25 13 28 18 20 43 -4 16 -14 41 -22 57 l-15 28 -7 -26z"></path>
                    <path d="M540 307 c-32 -15 -40 -26 -40 -57 0 -17 8 -29 25 -37 30 -13 40 0
            51 66 7 44 3 46 -36 28z"></path>
                    <path d="M69 252 c13 -42 30 -73 59 -104 37 -40 84 -37 180 11 42 21 96 44
            120 51 37 12 42 17 42 42 0 28 -1 28 -42 21 -56 -10 -260 -10 -320 0 l-47 8
            8 -29z"></path>
                    <path d="M479 163 c-6 -16 -18 -36 -26 -46 -9 -9 -14 -20 -10 -23 10 -10 91
            72 83 84 -13 21 -36 13 -47 -15z"></path>
                    <path d="M331 135 c-45 -25 -90 -45 -99 -45 -36 0 7 -21 55 -27 76 -9 100 1
            133 54 17 26 30 51 30 55 0 18 -39 5 -119 -37z"></path>
                  </g>
                </svg>
              </span>
              <span>Hoop Journey</span>
            </div>
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
          </button>
          <div class="accordion-content">
            <div class="accolades-container">
              <!-- Hoop accolades cards -->
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 100 100" width="32" height="32" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0,100) scale(0.1,-0.1)" stroke="none"> <path d="M449 706 c-80 -30 -212 -82 -292 -116 -129 -55 -147 -66 -147 -86 0 -16 14 -33 48 -56 26 -17 107 -77 180 -131 l133 -99 102 47 c395 186 528 255 525 272 -2 9 -30 32 -63 51 -112 63 -322 172 -331 172 -5 -1 -75 -25 -155 -54z m191 19 c37 -19 37 -23 0 -37 -17 -5 -29 -15 -27 -21 1 -5 37 -29 79 -53 l77 -44 45 17 c44 17 46 16 95 -7 28 -13 51 -26 51 -30 0 -3 -57 -32 -127 -64 l-128 -58 -52 28 c-56 30 -59 34 -42 51 17 17 6 57 -21 70 -14 7 -56 13 -94 13 -57 0 -77 5 -115 27 -25 14 -41 28 -36 30 6 2 66 23 135 48 69 24 126 44 128 44 2 1 16 -6 32 -14z m125 -67 c36 -18 65 -35 65 -38 0 -3 -13 -11 -29 -17 -25 -9 -36 -7 -82 19 -72 39 -77 45 -48 57 13 5 25 10 26 10 2 1 32 -13 68 -31z m-402 -54 c45 -25 46 -25 26 -45 -23 -23 -24 -33 -4 -52 25 -26 83 -39 138 -33 46 5 57 3 101 -25 27 -17 45 -34 40 -38 -5 -4 -69 -34 -141 -67 -95 -42 -133 -64 -133 -76 0 -9 -4 -20 -10 -23 -6 -3 -10 4 -10 18 0 16 -12 32 -36 50 l-36 25 41 21 c22 12 41 24 41 26 0 3 -39 30 -86 60 l-85 55 -44 -19 -43 -19 -41 28 -42 27 128 56 c70 31 133 56 139 56 6 1 32 -10 57 -25z m222 -48 c20 -15 15 -46 -8 -46 -15 0 -107 48 -107 56 0 10 98 2 115 -10z m-100 -23 c25 -16 45 -31 45 -35 0 -13 -69 -9 -105 6 -37 16 -42 25 -23 44 18 18 32 15 83 -15z m-206 -100 c33 -21 60 -41 61 -45 0 -4 -13 -14 -29 -22 -27 -15 -30 -14 -92 30 -71 49 -79 60 -52 67 38 10 54 6 112 -30z"/> </g> </svg> </div> <div class="accolade-title">2x Finals Appearances</div> <div class="accolade-desc">Season 2 - Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg version="1.0" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 50 50" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0.000000,50.000000) scale(0.100000,-0.100000)" stroke="none"> <path d="M20 460 c0 -6 30 -10 70 -10 l70 0 0 -60 0 -60 -70 0 c-40 0 -70 -4 -70 -10 0 -6 33 -10 80 -10 l80 0 0 35 0 35 70 0 70 0 0 -130 0 -130 -70 0 -70 0 0 35 0 35 -80 0 c-47 0 -80 -4 -80 -10 0 -6 30 -10 70 -10 l70 0 0 -60 0 -60 -70 0 c-40 0 -70 -4 -70 -10 0 -6 33 -10 80 -10 l80 0 0 35 0 35 80 0 80 0 0 70 0 70 70 0 c40 0 70 4 70 10 0 6 -30 10 -70 10 l-70 0 0 70 0 70 -80 0 -80 0 0 35 0 35 -80 0 c-47 0 -80 -4 -80 -10z"/> </g> </svg> </div> <div class="accolade-title">2x Conference-Finals Contender</div> <div class="accolade-desc">Season 2 - Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 64 64" width="32" height="32" xmlns="http://www.w3.org/2000/svg"> <g transform="translate(0,64) scale(0.1,-0.1)" stroke="none"> <path d="M155 508 c52 -84 60 -108 47 -126 -26 -36 -52 -98 -52 -128 0 -51 40 -115 90 -141 55 -29 105 -29 160 0 50 26 90 90 90 141 0 30 -26 92 -52 128 -13 18 -5 42 47 126 l26 42 -40 0 c-38 0 -42 -3 -73 -55 -18 -30 -36 -55 -41 -55 -5 0 6 25 23 55 l31 55 -29 0 c-19 0 -35 -8 -45 -22 l-16 -23 -19 23 c-14 18 -26 23 -55 20 l-36 -3 30 -49 c17 -26 27 -51 23 -55 -4 -3 -8 -1 -11 4 -2 6 -17 31 -33 58 -25 39 -35 47 -61 47 l-30 0 26 -42z m185 -248 c0 -47 -3 -60 -15 -60 -11 0 -15 11 -15 40 0 35 -3 40 -22 40 l-23 1 24 19 c41 35 51 27 51 -40z"/> </g> </svg> </div> <div class="accolade-title">2x All-EBA First Team</div> <div class="accolade-desc">Season 2 - Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M12,2L9.19,8.63L2,9.24L7.46,13.97L5.82,21L12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.63L12,2M12,4.74L13.71,8.42L17.77,8.74L14.59,11.51L15.48,15.43L12,13.31L8.52,15.43L9.41,11.51L6.23,8.74L10.29,8.42L12,4.74Z"/> </svg> </div> <div class="accolade-title">2x All-Star Starter</div> <div class="accolade-desc">Season 2 - Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M21,9H15L13,3H11L9,9H3L7,2H5L1,9V11H7L9,18H11V22H13V18H15L17,11H23V9H21M9.5,9.5A1,1 0 0,1 8.5,10.5A1,1 0 0,1 7.5,9.5A1,1 0 0,1 8.5,8.5A1,1 0 0,1 9.5,9.5M16.5,9.5A1,1 0 0,1 15.5,10.5A1,1 0 0,1 14.5,9.5A1,1 0 0,1 15.5,8.5A1,1 0 0,1 16.5,9.5Z"/> </svg> </div> <div class="accolade-title">2x Center of the Year</div> <div class="accolade-desc">Season 2 - Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M12 3.18L19 6.3V11.22C19 12.92 18.5 14.65 17.65 16.17C16.9 15.45 16.36 14.5 16.05 13.46C16.84 12.14 17.34 10.6 17.34 9C17.34 7.43 16.84 5.95 16 4.68L12 6.8L8 4.68C7.16 5.95 6.66 7.43 6.66 9C6.66 10.6 7.16 12.14 7.95 13.46C7.64 14.5 7.1 15.45 6.35 16.17C5.5 14.65 5 12.92 5 11.22V6.3L12 3.18Z"/> <circle cx="12" cy="8" r="3"/> <path d="M6 17c1.6-2.1 4.14-3 6-3s4.4.9 6 3"/> </svg> </div> <div class="accolade-title">All-Defensive First Team</div> <div class="accolade-desc">Season 3</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M12 1L3 5V11C3 16.55 6.84 21.74 12 23C17.16 21.74 21 16.55 21 11V5L12 1M12 5C13.66 5 15 6.34 15 8C15 9.66 13.66 11 12 11C10.34 11 9 9.66 9 8C9 6.34 10.34 5 12 5M17.13 17C15.92 18.85 14.11 20.24 12 20.92C9.89 20.24 8.08 18.85 6.87 17C6.53 16.5 6.24 16 6 15.47C6 13.82 8.71 12.47 12 12.47C15.29 12.47 18 13.79 18 15.47C17.76 16 17.47 16.5 17.13 17Z"/> <path d="M12 6l1.09 2.95L16 9.24l-2.59 2.27L14.17 15L12 13.27L9.83 15l.76-3.49L8 9.24l2.91-.29L12 6z"/> </svg> </div> <div class="accolade-title">All-Defensive Second Team</div> <div class="accolade-desc">Season 2</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M10,2H14A2,2 0 0,1 16,4V6H20A2,2 0 0,1 22,8V19A2,2 0 0,1 20,21H4C2.89,21 2,20.1 2,19V8C2,6.89 2.89,6 4,6H8V4A2,2 0 0,1 10,2M14,6V4H10V6H14Z"/> </svg> </div> <div class="accolade-title">Franchise Owner of The Year</div> <div class="accolade-desc">Season 3 - Nashville Anthem</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M5 16L3 5l5.5 5l3.5-6l3.5 6L21 5l-2 11H5z"/> <path d="M19 19a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1v-1h14v1z"/> </svg> </div> <div class="accolade-title">EBA Rebound King</div> <div class="accolade-desc">Season 2</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 64 64" xmlns="http://www.w3.org/2000/svg" preserveAspectRatio="xMidYMid meet"> <g transform="translate(0,64) scale(0.1,-0.1)" stroke="none"> <path d="M290 598 c1 -48 14 -88 30 -88 12 0 19 11 24 38 9 59 8 62 -24 62 -17 0 -30 -5 -30 -12z"/> <path d="M184 538 c-52 -35 -117 -120 -112 -147 6 -30 33 -23 46 12 16 43 76 103 119 119 21 8 33 18 31 28 -5 26 -33 22 -84 -12z"/> <path d="M377 563 c-15 -14 -5 -30 26 -41 43 -16 103 -76 119 -119 14 -40 45 -42 40 -3 -4 39 -53 102 -106 138 -48 32 -67 38 -79 25z"/> <path d="M286 354 c-31 -30 -9 -84 34 -84 24 0 50 26 50 50 0 24 -26 50 -50 50 -10 0 -26 -7 -34 -16z"/> <path d="M30 320 c0 -32 3 -33 63 -24 26 5 37 12 37 24 0 12 -11 19 -37 24 -60 9 -63 8 -63 -24z"/> <path d="M538 343 c-44 -7 -37 -39 10 -47 59 -9 62 -8 62 24 0 32 -4 33 -72 23z"/> <path d="M74 256 c-18 -48 133 -201 181 -182 26 9 16 31 -18 44 -43 16 -103 76 -119 119 -12 34 -35 44 -44 19z"/> <path d="M522 237 c-16 -43 -76 -103 -119 -119 -40 -14 -42 -45 -3 -40 57 6 176 128 168 171 -6 30 -33 23 -46 -12z"/> <path d="M300 118 c0 -7 -3 -30 -6 -51 -7 -36 -6 -37 26 -37 32 0 33 1 26 37 -3 21 -6 44 -6 51 0 6 -9 12 -20 12 -11 0 -20 -6 -20 -12z"/> </g> </svg> </div> <div class="accolade-title">Ranger</div> <div class="accolade-desc">Season 3 - Highest FG%</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <circle cx="7" cy="7" r="3"/> <circle cx="17" cy="7" r="3"/> <path d="M2 22v-2.5C2 16 6.33 15 9 15s7 1 7 4.5V22H2z"/> <path d="M15 22v-2.5c0-1.57-.46-2.64-1.25-3.47a9.55 9.55 0 0 1 3.25.47c2 .67 5 .67 5 3V22h-7z"/> </svg> </div> <div class="accolade-title">Duo Dynasty</div> <div class="accolade-desc">Season 3 - K7YO0</div> </div>
              <div class="accolade-card"> <div class="accolade-icon"> <svg viewBox="0 0 24 24"> <path d="M5 16L3 5L8.5 10L12 4L15.5 10L21 5L19 16H5z"/> <path d="M12,10L8,4.4L9.6,2H14.4L16,4.4L12,10M15.5,6.8L14.3,8.5C16.5,9.4 18,11.5 18,14A6,6 0 0,1 12,20A6,6 0 0,1 6,14C6,11.5 7.5,9.4 9.7,8.5L8.5,6.8C5.8,8.1 4,10.8 4,14A8,8 0 0,0 12,22A8,8 0 0,0 20,14C20,10.8 18.2,8.1 15.5,6.8Z"/> </svg> </div> <div class="accolade-title">Championships</div> <div class="accolade-desc">Season 2 - Nashville Anthem</div> </div>
            </div>
          </div>

          <button class="accordion-header" aria-expanded="false" style="margin-top: 16px;">
            <div class="accordion-left">
              <span class="accordion-logo">
                <svg width="20" height="20" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm-10 7H8v3H6v-3H3v-2h3V8h2v3h3v2zm4.5 2c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm4-3c-.83 0-1.5-.67-1.5-1.5S18.67 9 19.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"/></svg>
              </span>
              <span>Other Games</span>
            </div>
            <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true"><path fill="currentColor" d="M7 10l5 5 5-5z"/></svg>
          </button>
          <div class="accordion-content">
            <div class="accolades-container">
              <!-- Other games/awards cards -->
              <div class="accolade-card">
                <div class="accolade-icon">
                  <svg viewBox="0 0 24 24"><path d="M6.2 2.44L18.1 14.34L20.22 12.22L21.63 13.63L19.16 16.1L22.34 19.28C22.73 19.67 22.73 20.3 22.34 20.69L21.63 21.4C21.24 21.79 20.61 21.79 20.22 21.4L17.04 18.22L14.56 20.7L13.15 19.29L15.27 17.17L3.37 5.27V2.44H6.2M15.89 10L20.63 5.26V2.44H17.8L13.06 7.18L15.89 10M10.94 15L8.11 12.13L5.9 14.34L3.78 12.22L2.37 13.63L4.84 16.1L1.66 19.29C1.27 19.68 1.27 20.31 1.66 20.7L2.37 21.41C2.76 21.8 3.39 21.8 3.78 21.41L6.96 18.23L9.44 20.71L10.85 19.3L8.73 17.18L10.94 15Z"/></svg>
                </div>
                <div class="accolade-title">#11 | Tier 7 - Custom Duels</div>
                <div class="accolade-desc">Eleventh Player Globally To Obtain (2018)</div>
              </div>

              <div class="accolade-card">
                <div class="accolade-icon">
                  <svg viewBox="0 0 24 24"><path d="M14.5 11L16.5 13L18.5 11L16.5 9M9 3V5.5C9 7.5 7.5 9 5.5 9C7.5 9 9 10.5 9 12.5V15C9 16.79 10 18.21 11.38 19H5V21H19V19H16C16.82 18.78 17.5 18.23 17.9 17.5C16.83 17.65 15.94 17.12 15.5 16.37C14.8 16.72 14 17 13 17C10.79 17 9 15.21 9 13V11C9 8.79 7.21 7 5 7V5C7.21 5 9 3.21 9 1H11C11 2.5 11.95 3.75 13.2 4.29C13.48 3.82 13.86 3.42 14.31 3.13C13.13 2.91 12.23 1.97 12.05 .78C12.5 .28 13.15 0 13.84 0C15.03 0 16 .97 16 2.16C16 2.96 15.7 3.7 15.17 4.27L17.22 6.31L15.5 8L13.5 6L11.5 8L13.5 10L15.5 8L17.92 10.42C19.03 9.89 20 8.76 20 7C20 5.5 19.18 4.26 18 3.64V3C18 1.34 16.66 0 15 0H14.84C14.4 0 14 .19 13.61 .36L13.6 .37L13.59 .37C13.21 .19 12.81 0 12.37 0C11.17 0 10.18 .97 10.18 2.16C10.18 2.75 10.37 3.3 10.69 3.75C10.26 3.27 10 2.67 10 2C10 .9 10.9 0 12 0H9C9 1.33 8.33 2 7 2S5 1.33 5 0H1V2H3C3 3.67 3.67 4.33 5 4.33S7 3.67 7 2C7 3.1 6.1 4 5 4C3.35 4 2 2.65 2 1H0V5C0 6.66 1.34 8 3 8H5C7.21 8 9 6.21 9 4V3Z"/></svg>
                </div>
                <div class="accolade-title">to be decided</div>
                <div class="accolade-desc">idk</div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- ───────────  GFX  ─────────── -->
      <div id="gfxSection" class="accolades-section fade-section hidden">
        <h2 class="section-title" data-glitch="GFX Gallery">
          <svg width="32" height="32" viewBox="0 0 24 24" style="vertical-align:middle;margin-right:10px;fill:var(--primary);"><path d="M21 19V5c0-1.1-.9-2-2-2H5C3.89 3 3 3.9 3 5v14c0 1.11.89 2 2 2h14c1.1 0 2-.89 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5zM7 8c0-1.1.9-2 2-2s2 .9 2 2-.9 2-2 2-2-.9-2-2z"/></svg>
          GFX Gallery
        </h2>
        <div class="anime-faq" style="text-align:center;color:var(--accent);margin-bottom:18px;font-size:1.05rem;max-width:600px;margin-left:auto;margin-right:auto;">
          All GFXs I've created over the years, from newest to oldest. (you'll be able to tell anyways)
        </div>

        <style>
          /* ─────────────  PREMIUM GFX GALLERY STYLES  ───────────── */
          #gfxSection .gfx-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
            align-items: start;
          }

          #gfxSection .gfx-item {
            background: linear-gradient(135deg, var(--primary-rgba-08) 0%, var(--accent-rgba-04) 100%);
            border: 1px solid var(--primary-rgba-25);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0;
            transform: translateY(30px) scale(0.95);
            animation: fadeInUp 0.6s cubic-bezier(0.4,0,0.2,1) forwards;
            box-shadow: 0 8px 24px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
          }

          #gfxSection .gfx-item::before {
            display: none;
          }

          #gfxSection .gfx-item:hover {
            transform: translateY(-12px) scale(1.02);
            border-color: var(--primary);
            box-shadow: 0 20px 40px rgba(0,0,0,0.4), 0 0 0 1px var(--primary-rgba-20), inset 0 1px 0 rgba(255,255,255,0.1);
            background: linear-gradient(135deg, var(--primary-rgba-12) 0%, var(--accent-rgba-06) 100%);
          }

          #gfxSection .gfx-item-image-wrapper {
            position: relative;
            overflow: hidden;
            background: rgba(0,0,0,0.2);
            aspect-ratio: 16 / 9;
          }

          #gfxSection .gfx-img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
            transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            will-change: transform;
          }

          #gfxSection .gfx-item:hover .gfx-img {
            transform: scale(1.08);
          }

          #gfxSection .gfx-item-overlay {
            position: absolute;
            inset: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, transparent 50%);
            opacity: 0;
            transition: opacity 0.4s ease;
            z-index: 2;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            padding: 20px;
          }

          #gfxSection .gfx-item:hover .gfx-item-overlay {
            opacity: 1;
          }

          #gfxSection .gfx-view-btn {
            background: linear-gradient(135deg, var(--primary), var(--accent));
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 0.9rem;
            cursor: pointer;
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          }

          #gfxSection .gfx-item:hover .gfx-view-btn {
            transform: translateY(0);
            opacity: 1;
          }

          #gfxSection .gfx-view-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4);
          }

          #gfxSection .gfx-item-badge {
            position: absolute;
            top: 12px;
            right: 12px;
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            backdrop-filter: blur(10px);
            color: #fff;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.1);
            z-index: 3;
            transition: all 0.3s ease;
          }

          #gfxSection .gfx-item:hover .gfx-item-badge {
            transform: scale(1.05);
            box-shadow: 0 6px 16px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.3);
          }

          #gfxSection .gfx-item figcaption {
            padding: 18px 20px;
            color: var(--accent-bright);
            font-size: 0.95rem;
            line-height: 1.6;
            background: linear-gradient(to top, rgba(0,0,0,0.3), transparent);
            transition: color 0.3s ease;
            position: relative;
            z-index: 2;
          }

          #gfxSection .gfx-item:hover figcaption {
            color: #fff;
          }

          /* Staggered animation */
          #gfxSection .gfx-item:nth-child(n) {
            animation-delay: calc(0.05s * var(--card-index, 1));
          }

          /* ─────────────  LIGHTBOX MODAL  ───────────── */
          .gfx-lightbox {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.95);
            backdrop-filter: blur(20px);
            z-index: 10000;
            opacity: 0;
            transition: opacity 0.3s ease;
            overflow: hidden;
          }

          .gfx-lightbox.active {
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 1;
          }

          .gfx-lightbox-content {
            position: relative;
            max-width: 95vw;
            max-height: 95vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            transform: scale(0.9);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
          }

          .gfx-lightbox.active .gfx-lightbox-content {
            transform: scale(1);
          }

          .gfx-lightbox-img {
            max-width: 100%;
            max-height: 85vh;
            object-fit: contain;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.5);
            animation: lightboxFadeIn 0.4s ease;
          }

          @keyframes lightboxFadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
          }

          .gfx-lightbox-caption {
            color: #fff;
            font-size: 1.1rem;
            text-align: center;
            max-width: 800px;
            padding: 0 20px;
            line-height: 1.6;
          }

          .gfx-lightbox-close {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            color: #fff;
            font-size: 24px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10001;
          }

          .gfx-lightbox-close:hover {
            background: rgba(255,255,255,0.2);
            transform: rotate(90deg) scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          }

          .gfx-lightbox-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 50px;
            height: 50px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            color: #fff;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 10001;
          }

          .gfx-lightbox-nav:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-50%) scale(1.1);
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
          }

          .gfx-lightbox-prev {
            left: 20px;
          }

          .gfx-lightbox-next {
            right: 20px;
          }

          /* Loading state */
          .gfx-item-loading {
            position: absolute;
            inset: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(0,0,0,0.3);
            z-index: 1;
          }

          .gfx-item-loading::after {
            content: '';
            width: 40px;
            height: 40px;
            border: 3px solid rgba(255,255,255,0.2);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
          }

          /* Mobile responsive */
          @media (max-width: 768px) {
            #gfxSection .gfx-grid {
              grid-template-columns: 1fr;
              gap: 20px;
            }
            .gfx-lightbox-content {
              max-width: 98vw;
              padding: 10px;
            }
            .gfx-lightbox-close,
            .gfx-lightbox-nav {
              width: 40px;
              height: 40px;
              font-size: 18px;
            }
          }
          /* GFX vote buttons (overlay, do not affect card height) */
          .gfx-vote-buttons{
            position:absolute;
            right:3px;
            bottom:0px;
            display:flex;
            gap:6px;
            justify-content:flex-end;
            align-items:center;
            z-index:4;
            pointer-events:auto;
          }
          .gfx-vote-buttons .anime-vote-btn{
            background:rgba(0,0,0,0.65);
            border-radius:999px;
            padding:3px 8px;
            font-size:0.7rem;
          }
        </style>
  
        <div class="gfx-grid">
          
          <figure class="gfx-item" data-gfx-index="-2" style="--card-index: -1;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/GBFgzsp/nashville-2.png" alt="GFX Teaser 1" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
              <div class="gfx-item-badge">NEWEST</div>
            </div>
            <figcaption>"Skillful's most deadliest triangle" - Wurial, Whake, King Darius.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="-1" style="--card-index: 0;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/9krfdQSZ/nashville-1.png" alt="'Skillful's most deadliest triangle' - Wurial, Whake, King Darius." loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
              <div class="gfx-item-badge">NEW</div>
            </div>
            <figcaption>Experimental vectorized offset practice GFX</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="0" style="--card-index: 1;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/XZ0p9VZR/nashville-38.png" alt="Experimental vectorized offset practice GFX" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Media for Roblox Football League Athlete - Safety, HoopsLifeCenterMan.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="1" style="--card-index: 2;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/TJRKbQb/nashville-35.png" alt="EBA Season 3 Final Four graphic" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Poster for Undisputed Combat MMA Fighter, Ken Kaneki.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="2" style="--card-index: 3;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/KpBsy0g9/Lockset-DTOTY.png" alt="Gen 5 graphic" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Media for Roblox Football League Athlete - Defensive Tackle, Lockset.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="3" style="--card-index: 4;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/V0PFbvGD/nashville-27.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Itoshi Rin being interviewed by Touch Lock on the Blue Lock VS U-20 Match.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="4" style="--card-index: 5;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/HTG8VZLF/nashville-17.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Itoshi Sae attending the 'Touch Lock Opening Ceremony' event on April '25.</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="5" style="--card-index: 6;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/zVzYshr1/nashville-10.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Touch Lock Official Game Thumbnail</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="6" style="--card-index: 7;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/Y7DMPs8d/nashville-36.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>CEBA Virginia Cavaliers Franchise Owner - m8ntal</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="7" style="--card-index: 8;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/wjnJhkp/EHSGFX-2.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
              <div class="gfx-item-badge">UPDATED</div>
            </div>
            <figcaption>SPIKED Volleyball Team Media Day - Lethal</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="8" style="--card-index: 9;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/ymy4jfJK/nashville-28.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Poster of Volleyball Legends Setter - pythusiast</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="9" style="--card-index: 10;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/pvNWsGwx/EHSGFX-18.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Poster for Top 5 Players in Stats - Skillful</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="10" style="--card-index: 11;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/ZpjBdrG5/FOTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Franchise Owner of The Year, SHM_Ashes - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="11" style="--card-index: 12;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/MyZpX5Jb/6MOTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Sixth Man of The Year, Avoidvrovro - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="12" style="--card-index: 13;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/Pvqg34hh/COTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Center of The Year, goodtimes_3 - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="13" style="--card-index: 14;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/WNRT4ggP/SGOTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Shooting Guard of The Year, xywipe - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="14" style="--card-index: 15;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/h1rc78dx/EHSGFX-19.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Point Guard of The Year, AltieBoy2 - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="15" style="--card-index: 16;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/Ngh01Kwc/PFOTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Power Forward of The Year, sunbreathingdude22 - EHS</figcaption>
          </figure>

          <figure class="gfx-item" data-gfx-index="16" style="--card-index: 17;">
            <div class="gfx-item-image-wrapper">
              <img class="gfx-img" src="https://i.ibb.co/Ng1F6RD0/SFOTY.png" alt="GFX placeholder" loading="lazy">
              <div class="gfx-item-overlay">
                <button class="gfx-view-btn">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
                  View Full Size
                </button>
              </div>
            </div>
            <figcaption>Small Forward of The Year, PrimeDerrickRose - EHS</figcaption>
          </figure>
        </div>

        <!-- Lightbox Modal -->
        <div class="gfx-lightbox" id="gfxLightbox">
          <button class="gfx-lightbox-close" aria-label="Close lightbox">×</button>
          <button class="gfx-lightbox-nav gfx-lightbox-prev" aria-label="Previous image">‹</button>
          <button class="gfx-lightbox-nav gfx-lightbox-next" aria-label="Next image">›</button>
          <div class="gfx-lightbox-content">
            <img class="gfx-lightbox-img" src="" alt="">
            <div class="gfx-lightbox-caption"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ───────────  JS  ─────────── -->
  <script>
    /* intro fade with safety timeout */
    (function(){
      let introUnlocked = false;
      
      function unlockIntro(){
        if(introUnlocked) return;
        introUnlocked = true;
        const overlay = document.getElementById('introOverlay');
        const main = document.getElementById('mainContainer');
        if(!overlay || !main) return;
        overlay.classList.add('fade-out');
        setTimeout(()=>{
          main.classList.add('show');
          overlay.style.display='none';
        },1000);
      }

      // 1) Normal case: when the page fully loads, allow up to 3s after that
      window.addEventListener('load',()=>{
        setTimeout(unlockIntro,3000);
      });

      // 2) DOM ready: 3s after DOM is ready
      document.addEventListener('DOMContentLoaded',()=>{
        setTimeout(unlockIntro,3000);
      });

      // 3) Hard safety cap: never keep the user longer than ~8s from first paint
      setTimeout(unlockIntro,8000);
    })();

  

    /* tabs */
    let currentCategory = 'home';
    let isLoadingAnimeData = false;
    const animeDataCache = {
        all: [],
        categories: new Set(),
        scheduleRelevant: [],
        scheduleData: [],
        scheduleCache: {}, // For AniList API responses
        scheduleLastFetched: null,
        votes: {}, // Cache votes so we don't fetch every render
        votesLastFetched: null
    };
    const ANIME_JSON_PATH = 'https://raw.githubusercontent.com/Mythyxs/website/refs/heads/main/anime_backup.json';
    const ANIME_VOTES_BIN_ID = '6844d32e8960c979a5a675ff';
    const ANIME_VOTES_API_KEY = '$2a$10$NwYMNtIZx5ag/xokwHWN4.1u.yOLzNxLLroIP/IBcjJBEi0YiB81e';
    const ANIME_VOTES_URL = `https://api.jsonbin.io/v3/b/${ANIME_VOTES_BIN_ID}`;
  const GFX_VOTES_BIN_ID = '6942812343b1c97be9f42b9c';
  const GFX_VOTES_URL = `https://api.jsonbin.io/v3/b/${GFX_VOTES_BIN_ID}`;


    const categoryColors = {
      'Platinum Masterpiece': 'var(--cat-platinum)',
      'Overaveragely Enjoyable': 'var(--cat-overaverage)',
      'Average Enjoyability': 'var(--cat-average)',
      'Unfinished / Disinterested': 'var(--cat-unfinished)',
      'Planned to Watch': 'var(--cat-planned)',
    };

    // Random loading messages for variety
    const loadingMessages = [
        "Fetching data and votes. This can take a moment on first load.",
        "i love tokyo ghoul i love frieren i love gachiakuta i love anime",
        "you see i want to add more shit here but im just not creative enough"
    ];

    function getRandomLoadingMessage() {
        return loadingMessages[Math.floor(Math.random() * loadingMessages.length)];
    }

    // Ensure the anime list loading indicator always exists *inside* the grid container.
    // (We clear #animeGridContainer in multiple places; that used to delete the loader and leave a blank screen.)
    function getOrCreateAnimeLoadingIndicator(container) {
        const existing = document.getElementById('animeListLoading');
        if (existing) return existing;
        if (!container) return null;

        const loader = document.createElement('div');
        loader.className = 'loading-indicator';
        loader.id = 'animeListLoading';
        loader.innerHTML = `
            <div class="loader-ring" aria-hidden="true"></div>
            <div class="loader-title">Loading Anime List</div>
            <div class="loader-sub">
              <span class="loader-message-text">${getRandomLoadingMessage()}</span>
              <span class="loader-dots" aria-hidden="true"><i></i><i></i><i></i></span>
            </div>
        `;
        container.appendChild(loader);
        return loader;
    }

    function showAnimeLoading(container) {
        if (!container) return;
        // Clearing the container is fine, but we MUST re-add the loader so the UI doesn't go blank.
        container.innerHTML = '';
        const loader = getOrCreateAnimeLoadingIndicator(container);
        if (loader) {
            loader.style.display = 'block';
            // Randomize the message each time the loader is shown
            const messageSpan = loader.querySelector('.loader-message-text');
            if (messageSpan) {
                messageSpan.textContent = getRandomLoadingMessage();
            }
        }
    }

    function hideAnimeLoading() {
        const loader = document.getElementById('animeListLoading');
        if (loader) loader.style.display = 'none';
    }

    function getScoreColorClass(score10) {
        if (score10 === null || score10 === undefined || score10 === 0) return 'score-none';
        if (score10 >= 8.0) return 'score-green';
        if (score10 >= 7.0) return 'score-lightgreen';
        if (score10 >= 6.0) return 'score-yellow';
        if (score10 >= 5.0) return 'score-orange';
        return 'score-red';
    }

    function createScoreChipHTML(rating) {
        const score = parseFloat(rating);
        if (isNaN(score) || score === 0) return '';
        
        const colorClass = getScoreColorClass(score);
        return `
            <div class="score-chip ${colorClass}">
                <span class="star-icon">★</span>
                <span class="score-value">${score.toFixed(1)}</span>
            </div>
        `;
    }
    
    function createAnimeCard(anime, votes = {}) {
        const card = document.createElement('div');
        card.className = 'anime-card';
        card.dataset.animeTitle = anime.title;
        
        /* ---------------- utilities ---------------- */
        const categoryClass =
          'cat-' + (anime.category || '')
            .replace(/\s+/g,'-')
            .replace(/[^a-zA-Z0-9\-]/g,'')
            .toLowerCase();

        const scoreChipHTML = createScoreChipHTML(anime.rating);

        const episodeLabel =
          anime.watchedEpisodes != null && anime.totalEpisodes != null
            ? `${anime.watchedEpisodes}/${anime.totalEpisodes} episodes`
            : anime.watchedEpisodes != null
              ? `${anime.watchedEpisodes} watched`
              : '';

        const episodesChipHTML = episodeLabel
          ? `<div class="episodes-chip">
               <svg viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
               <span>${episodeLabel}</span>
             </div>`
          : '';

        // Get vote counts for this anime
        const voteData = votes[anime.title] || { likes: 0, dislikes: 0 };
        const votedAnime = JSON.parse(localStorage.getItem('votedAnime') || '{}');
        const voteStatus = votedAnime[anime.title];
        
        const likeBtnClass = voteStatus === 'like' ? 'anime-vote-btn like-btn liked' : 'anime-vote-btn like-btn';
        const dislikeBtnClass = voteStatus === 'dislike' ? 'anime-vote-btn dislike-btn disliked' : 'anime-vote-btn dislike-btn';
        const likeBtnDisabled = voteStatus ? 'disabled' : '';
        const dislikeBtnDisabled = voteStatus ? 'disabled' : '';

        /* ---------------- markup ---------------- */
        card.innerHTML = `
          <div class="anime-card-content">
            <img src="${anime.coverImageUrl || 'placeholder.png'}"
                 alt="${anime.title}"
                 class="anime-card-cover"
                 onerror="this.src='https://via.placeholder.com/80x115/1A1A1A/4A4A4A?text=No+Image';">

            <div class="anime-card-details" style="min-width:0;">
              <div class="anime-card-title">${anime.title}</div>
              
              <div class="anime-card-meta">
                  ${scoreChipHTML}
                  ${episodesChipHTML}
              </div>

              <div class="anime-card-category ${categoryClass}">
                ${anime.category}
              </div>

              ${anime.note
                ? `<div class="anime-card-note">${anime.note.replace(/\n/g,'<br>')}</div>`
                : ''}
            </div>
          </div>
          <div class="anime-vote-buttons">
            <button class="${likeBtnClass}" ${likeBtnDisabled} title="Like this anime">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"></path></svg>
              <span>${voteData.likes || 0}</span>
            </button>
            <button class="${dislikeBtnClass}" ${dislikeBtnDisabled} title="Dislike this anime">
              <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.32L8.36,20.57C8.34,20.67 8.33,20.78 8.33,20.89C8.33,21.3 8.5,21.68 8.77,21.95L9.83,23L16.41,16.42C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"></path></svg>
              <span>${voteData.dislikes || 0}</span>
            </button>
          </div>
        `;

        // Add event listeners for vote buttons
        const likeBtn = card.querySelector('.like-btn');
        const dislikeBtn = card.querySelector('.dislike-btn');
        if (likeBtn) {
            likeBtn.addEventListener('click', () => handleAnimeVote(anime.title, 'like'));
        }
        if (dislikeBtn) {
            dislikeBtn.addEventListener('click', () => handleAnimeVote(anime.title, 'dislike'));
        }

        return card;
    }

    async function renderAnimeList(skipAnimation = false) {
        const container = document.getElementById('animeGridContainer');
        const filterValue = document.getElementById('categoryFilterHeader').dataset.value || 'All';
        const sortValue = document.getElementById('sortOrderHeader').dataset.value || 'rating_desc';
        const searchValue = document.getElementById('searchBar').value.toLowerCase();

        if (!container) return;

        // Only show loader on FIRST load (when data isn't cached yet)
        const isFirstLoad = !animeDataCache.all.length;
        if (isFirstLoad) {
            showAnimeLoading(container);
            // If not already loading, start loading
            if (!isLoadingAnimeData) {
                await loadAndPrepareAnimeData();
                // Fetch and cache votes on first load
                if (animeDataCache.all.length > 0) {
                    const votes = await loadAnimeVotes();
                    animeDataCache.votes = votes;
                    animeDataCache.votesLastFetched = Date.now();
                    // Retry rendering after data is loaded
                    return renderAnimeList(skipAnimation);
                }
            }
            return;
        }
        
        // For subsequent renders (filtering, searching, sorting), render immediately with cached votes
        // Fetch fresh votes in background if cache is stale (older than 5 minutes)
        let votes = animeDataCache.votes || {};
        const now = Date.now();
        const votesCacheAge = animeDataCache.votesLastFetched ? (now - animeDataCache.votesLastFetched) : Infinity;
        const VOTES_CACHE_TTL = 5 * 60 * 1000; // 5 minutes
        
        if (Object.keys(votes).length === 0 || votesCacheAge > VOTES_CACHE_TTL) {
            // Use cached votes (or empty) for immediate render, fetch fresh ones in background
            loadAnimeVotes().then(freshVotes => {
                animeDataCache.votes = freshVotes;
                animeDataCache.votesLastFetched = now;
                // Update vote counts on existing cards if they're already rendered
                document.querySelectorAll('.anime-card').forEach(card => {
                    updateAnimeCardVotes(card, freshVotes);
                });
            }).catch(err => console.error('Failed to refresh votes:', err));
        }

        // Clear container and render cards immediately (votes are cached, so no async wait needed)
        container.innerHTML = '';

        let filteredList = animeDataCache.all.slice();

        if (searchValue) {
            filteredList = filteredList.filter(anime => anime.title.toLowerCase().includes(searchValue));
        }

        if (filterValue !== 'All') {
            filteredList = filteredList.filter(anime => anime.category === filterValue);
        }

        switch (sortValue) {
            case 'az':
                filteredList.sort((a, b) => a.title.localeCompare(b.title));
                break;
            case 'za':
                filteredList.sort((a, b) => b.title.localeCompare(a.title));
                break;
            case 'rating_desc':
                filteredList.sort((a, b) => (b.rating || 0) - (a.rating || 0) || a.title.localeCompare(b.title));
                break;
            case 'rating_asc':
                filteredList.sort((a, b) => (a.rating || 0) - (b.rating || 0) || a.title.localeCompare(b.title));
                break;
            case 'peoples_choice': {
                // Sort by likes (from votes), highest to lowest, then by rating, then title
                filteredList.sort((a, b) => {
                    const aLikes = (votes[a.title]?.likes || 0);
                    const bLikes = (votes[b.title]?.likes || 0);
                    if (bLikes !== aLikes) return bLikes - aLikes;
                    const ratingDiff = (b.rating || 0) - (a.rating || 0);
                    if (ratingDiff !== 0) return ratingDiff;
                    return a.title.localeCompare(b.title);
                });
                break;
            }
            case 'peoples_disliked': {
                // Sort by dislikes (from votes), highest to lowest, then by rating (ascending), then title
                filteredList.sort((a, b) => {
                    const aDislikes = (votes[a.title]?.dislikes || 0);
                    const bDislikes = (votes[b.title]?.dislikes || 0);
                    if (bDislikes !== aDislikes) return bDislikes - aDislikes;
                    const ratingDiff = (a.rating || 0) - (b.rating || 0);
                    if (ratingDiff !== 0) return ratingDiff;
                    return a.title.localeCompare(b.title);
                });
                break;
            }
        }
        
        // Determine top 3 ranked anime from the entire list
        const allRated = animeDataCache.all.filter(a => a.rating && a.rating > 0);
        const uniqueScores = Array.from(new Set(allRated.map(a => a.rating))).sort((a, b) => b - a);
        const topScores = {
            gold: uniqueScores[0],
            silver: uniqueScores[1],
            bronze: uniqueScores[2]
        };
        
        if (filteredList.length === 0) {
            container.innerHTML = `<div class="empty-state">I don't think I've watched that anime, sorry bro.</div>`;
        } else {
            filteredList.forEach((anime, index) => { 
              const card = createAnimeCard(anime, votes);
              
              // Add ranking class if applicable
              if (anime.rating) {
                  if (anime.rating === topScores.gold) {
                      card.classList.add('rank-gold');
                  } else if (anime.rating === topScores.silver) {
                      card.classList.add('rank-silver');
                  } else if (anime.rating === topScores.bronze) {
                      card.classList.add('rank-bronze');
                  }
              }

              if (skipAnimation) {
                  card.style.animation = 'none';
                  card.style.opacity = '1';
              }

              card.style.setProperty('--card-index', index % 10); 
              container.appendChild(card);
            });
        }
    }

    function updateAnimeTotalCount() {
        const total = animeDataCache.all.length;
        const categories = [
            { name: 'Platinum Masterpiece', selectorClass: 'platinum', label: 'PLATINUM' },
            { name: 'Overaveragely Enjoyable', selectorClass: 'overaverage', label: 'OVER AVERAGE' },
            { name: 'Average Enjoyability', selectorClass: 'average', label: 'AVERAGE' },
            { name: 'Unfinished / Disinterested', selectorClass: 'unfinished', label: 'UNFINISHED' },
            { name: 'Planned to Watch', selectorClass: 'planned', label: 'PLANNED' }
        ];

        const legend = document.querySelector('.anime-category-legend');
        if (!legend) return;

        // Update total pill
        const totalPill = legend.querySelector('.anime-category-pill.total');
        if (totalPill) {
            totalPill.textContent = `TOTAL - ${total}`;
        }

        // Update each category pill text
        categories.forEach(cat => {
            const count = animeDataCache.all.filter(anime => anime.category === cat.name).length;
            const pill = legend.querySelector(`.anime-category-pill.${cat.selectorClass}`);
            if (pill) {
                pill.textContent = `${cat.label} - ${count}`;
            }
        });
    }

    // Call this after loading anime data
    async function loadAndPrepareAnimeData() {
        // Prevent multiple simultaneous loads
        if (isLoadingAnimeData) return;
        if (animeDataCache.all.length > 0) return; // Already loaded
        
        isLoadingAnimeData = true;
        const container = document.getElementById('animeGridContainer');
        const loadingIndicator = getOrCreateAnimeLoadingIndicator(container);
        
        // Show loading indicator if we're on the anime list tab
        if (currentCategory === 'animeList' && container) {
            showAnimeLoading(container);
        }
        
        try {
            const response = await fetch(ANIME_JSON_PATH);
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const rawAnimeList = await response.json();
            
            animeDataCache.all = rawAnimeList.map(anime => ({
                ...anime,
                rating: anime.rating || 0 // Ensure rating is a number, default to 0
            }));

            animeDataCache.all.forEach(anime => animeDataCache.categories.add(anime.category));
            
            const categoryFilterMenu = document.getElementById('categoryFilterMenu');
            if (categoryFilterMenu) {
                // Remove the default "All Categories" option (keep it, but add others after)
                animeDataCache.categories.forEach(cat => {
                    const option = document.createElement('div');
                    option.className = 'custom-dropdown-option';
                    option.dataset.value = cat;
                    option.textContent = cat;
                    categoryFilterMenu.appendChild(option);
                });
            }

            animeDataCache.scheduleRelevant = animeDataCache.all.filter(entry =>
                entry.title && entry.title.trim().length > 0 &&
                (entry.category === 'Unfinished / Disinterested' || entry.category === 'Planned to Watch')
            );
            
            // Hide loading indicator
            hideAnimeLoading();
            
            // Update counts (render will be handled by showCategory or renderAnimeList)
            updateAnimeTotalCount();
            
            // If we're on the anime list tab, trigger a render
            if (currentCategory === 'animeList') {
                 renderAnimeList();
            }

        } catch (error) {
            console.error("Failed to load anime list:", error);
            if (container) container.innerHTML = `<div class="empty-state">Error loading anime list. Please try again later.</div>`;
            hideAnimeLoading();
        } finally {
            isLoadingAnimeData = false;
        }
    }
    
    // AniList API related functions (adapted from Flutter)
    const ANILIST_GRAPHQL_URL = 'https://anilist-proxy-4mpy.onrender.com/anilist';

    const ANILIST_QUERY = `
      query ($search: String) {
        Media(search: $search, type: ANIME) {
          title { romaji english }
          coverImage { medium large }
          episodes
          nextAiringEpisode { airingAt episode }
        }
      }`;

    async function fetchAnilistApiData(title) {
      console.log("Fetching:", title); 

      try {
        const response = await fetch(ANILIST_GRAPHQL_URL, {
          method: 'POST',
          headers: { 'Content-Type': 'application/json', 'Accept': 'application/json' },
          body: JSON.stringify({ query: ANILIST_QUERY, variables: { search: title } })
        });

        const jsonResponse = await response.json();
        console.log("AniList response for", title, jsonResponse); 

        return jsonResponse.data && jsonResponse.data.Media ? jsonResponse.data.Media : null;
      } catch (error) {
        console.error(`Failed to fetch from AniList for ${title}:`, error);
        return null;
      }
    }
    async function fetchAnimeDataWithCache(title, forceRefresh = false) {
        const now = new Date();
        if (!forceRefresh && animeDataCache.scheduleCache[title]) {
            const cached = animeDataCache.scheduleCache[title];
            if (now.getTime() - cached.fetchedAt.getTime() < (1 * 60 * 60 * 1000)) { // 1 hour cache
                return cached.data;
            }
        }
        const data = await fetchAnilistApiData(title);
        if (data) {
            animeDataCache.scheduleCache[title] = { data: data, fetchedAt: now };
        }
        return data;
    }

    async function loadAndCacheScheduleData(forceRefresh = false) {
        try {
            const response = await fetch("https://anilist-proxy-4mpy.onrender.com/cached-schedule");
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            const data = await response.json();
            console.log("Schedule:", data);
            const nowSec = Math.floor(Date.now() / 1000);
            animeDataCache.scheduleData = Array.isArray(data) ? data.map(anime => {
                // Some backends clear nextEpisode right after airing.
                // Try to find a fallback last aired timestamp if present.
                const nextAiringSec = anime.nextEpisode && anime.nextEpisode.airingAt;
                const fallbackLastAiredSec = (anime.lastEpisode && anime.lastEpisode.airingAt)
                  || (anime.previousEpisode && anime.previousEpisode.airingAt)
                  || null;

                // recentlyAired if the most recent known airing (next that just passed, or explicit last/previous) is within 24h
                let recentlyAired = false;
                let lastAiredAt = null;
                if (typeof nextAiringSec === 'number' && (nowSec - nextAiringSec) > 0 && (nowSec - nextAiringSec) < 24 * 60 * 60) {
                  recentlyAired = true;
                  lastAiredAt = nextAiringSec;
                } else if (typeof fallbackLastAiredSec === 'number' && (nowSec - fallbackLastAiredSec) > 0 && (nowSec - fallbackLastAiredSec) < 24 * 60 * 60) {
                  recentlyAired = true;
                  lastAiredAt = fallbackLastAiredSec;
                }

                return { ...anime, recentlyAired, lastAiredAt };
            }) : [];
            animeDataCache.scheduleData.sort((a, b) => {
                const aTime = a.nextEpisode && a.nextEpisode.airingAt ? a.nextEpisode.airingAt : 0;
                const bTime = b.nextEpisode && b.nextEpisode.airingAt ? b.nextEpisode.airingAt : 0;
                const aRecent = a.recentlyAired === true;
                const bRecent = b.recentlyAired === true;
                if (aRecent && bRecent) {
                    return bTime - aTime; 
                }
                if (aRecent && !bRecent) return -1;
                if (!aRecent && bRecent) return 1;
                return aTime - bTime;
            });
            animeDataCache.scheduleLastFetched = new Date();
        } catch (error) {
            console.error("Failed to load schedule:", error);
            animeDataCache.scheduleData = [];
        }
    }

    function formatAiringTimeLocal(timestamp) {
        const localDate = new Date(timestamp * 1000);
        return localDate.toLocaleString(undefined, { 
            weekday: 'long', month: 'long', day: 'numeric', 
            hour: 'numeric', minute: '2-digit', timeZoneName: 'short' 
        });
    }

    function calculateDaysUntil(timestamp) {
        const airingDate = new Date(timestamp * 1000);
        const nowDate = new Date();
        const today = new Date(nowDate.getFullYear(), nowDate.getMonth(), nowDate.getDate());
        const targetDay = new Date(airingDate.getFullYear(), airingDate.getMonth(), airingDate.getDate());
        return Math.ceil((targetDay - today) / (1000 * 60 * 60 * 24));
    }
    
    async function loadAndRenderSchedule(forceRefresh = false) {
        const container = document.getElementById('scheduleItemsContainer');
        const loadingIndicator = document.getElementById('scheduleLoading');
        if (loadingIndicator) loadingIndicator.style.display = 'block';
        container.innerHTML = '';

        if (animeDataCache.scheduleData.length === 0 || forceRefresh) {
            await loadAndCacheScheduleData(forceRefresh);
        }

        if (loadingIndicator) loadingIndicator.style.display = 'none';
        if (animeDataCache.scheduleData.length === 0) {
            container.innerHTML = `<div class="empty-state">No upcoming or recently aired episodes found currently!</div>`;
            return;
        }

        let lastGroupLabel = '';

        animeDataCache.scheduleData.forEach((anime, idx) => {
            const scheduleDiv = document.createElement('div');
            const nextEp = anime.nextEpisode;
            const officialTitle = anime.title || anime.romajiTitle || anime.englishTitle || 'Unknown Title';
            const coverUrl = anime.coverImage || 'placeholder.png';
            const totalEpisodes = anime.totalEpisodes;

            const lastAiredSec = typeof anime.lastAiredAt === 'number' ? anime.lastAiredAt : null;
            const formattedTime = (nextEp && nextEp.airingAt)
                ? formatAiringTimeLocal(nextEp.airingAt)
                : (lastAiredSec ? formatAiringTimeLocal(lastAiredSec) : 'N/A');
            const airingMs = nextEp && nextEp.airingAt ? nextEp.airingAt * 1000 : (lastAiredSec ? lastAiredSec * 1000 : null);
            const nowMs = Date.now();

            let statusText = "";
            let statusClass = "status-past";
            let groupLabel = "Past";

            if (anime.recentlyAired && airingMs) {
                const diff = nowMs - airingMs;
                const diffMins = Math.floor(diff / 60000);
                if (diffMins < 60) {
                    statusText = `Aired ${diffMins} minute${diffMins !== 1 ? 's' : ''} ago`;
                } else {
                    const diffHrs = Math.floor(diff / 3600000);
                    statusText = `Aired ${diffHrs} hour${diffHrs !== 1 ? 's' : ''} ago`;
                }
                statusClass = 'status-aired';
                groupLabel = 'Recently Aired';
            } else if (airingMs && airingMs > nowMs) {
                const airingDate = new Date(airingMs);
                const now = new Date();
                const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
                const target = new Date(airingDate.getFullYear(), airingDate.getMonth(), airingDate.getDate());
                const daysUntil = Math.ceil((target - today) / (1000 * 3600 * 24));
                if (daysUntil === 0) {
                    statusText = 'Airs Today';
                    statusClass = 'status-today';
                    groupLabel = 'Today';
                } else if (daysUntil === 1) {
                    statusText = 'Airs Tomorrow';
                    statusClass = 'status-tomorrow';
                    groupLabel = 'Tomorrow';
                } else {
                    statusText = `In ${daysUntil} days`;
                    statusClass = 'status-soon';
                    groupLabel = airingDate.toLocaleDateString(undefined, {
                      weekday: 'long',
                      month: 'short',
                      day: 'numeric'
                    });
                }
            } else {
                statusText = "No upcoming episode";
                statusClass = 'status-past';
            }

            const episodeProgressText = nextEp ? `EP ${nextEp.episode}${totalEpisodes ? `/${totalEpisodes}` : ''}` : '';

            let scheduleItemClass = 'schedule-item';
            if (statusClass === 'status-today') scheduleItemClass += ' airing-today';
            if (statusClass === 'status-aired') scheduleItemClass += ' status-aired'; 
            scheduleDiv.className = scheduleItemClass;
            scheduleDiv.style.setProperty('--card-index', idx % 10); // staggered animation

            // Insert day / group header when label changes
            if (groupLabel && groupLabel !== lastGroupLabel) {
                const headerEl = document.createElement('div');
                headerEl.className = 'schedule-day-header';
                headerEl.textContent = groupLabel;
                container.appendChild(headerEl);
                lastGroupLabel = groupLabel;
            }

            scheduleDiv.innerHTML = `
                <img src="${coverUrl}" alt="${officialTitle}" class="schedule-item-cover" onerror="this.src='https://via.placeholder.com/70x100/1A1A1A/4A4A4A?text=N/A';">
                <div class="schedule-item-details">
                    <div class="schedule-item-title">${officialTitle}</div>
                    <div class="schedule-meta-row">
                      ${episodeProgressText ? `<span class=\"schedule-meta-ep\">${episodeProgressText}</span>` : ''}
                      ${episodeProgressText ? `<span class="schedule-meta-separator">•</span>` : ''}
                      <span class="schedule-meta-status ${statusClass}">${statusText}</span>
                    </div>
                    <div class="schedule-item-time">
                      <span class="schedule-time-icon">
                        <svg viewBox="0 0 24 24" aria-hidden="true"><path d="M12 4a8 8 0 1 0 8 8a8.009 8.009 0 0 0-8-8m0-2a10 10 0 1 1-10 10A10.011 10.011 0 0 1 12 2m.5 5h-1a1 1 0 0 0-1 1v4.25a1 1 0 0 0 .553.894l3.5 1.75a1 1 0 0 0 .894-1.789L12.5 11.382z"/></svg>
                      </span>
                      <span>${formattedTime}</span>
                    </div>
                </div>
            `;
            container.appendChild(scheduleDiv);
            // Force reflow and trigger animation
            void scheduleDiv.offsetWidth;
            scheduleDiv.style.opacity = '0';
            scheduleDiv.style.animation = `cardEntry 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards`;
            scheduleDiv.style.animationDelay = `calc(0.05s * ${idx % 10})`;
        });
    }
    

    // ─── Anime Voting Functions ───
    async function loadAnimeVotes() {
        try {
            const response = await fetch(`${ANIME_VOTES_URL}/latest`, { 
                headers: { 'X-Master-Key': ANIME_VOTES_API_KEY }
            });
            if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
            
            const data = await response.json();
            const votesData = data.record.data || [];
            
            // Convert array to map for easy lookup
            const votesMap = {};
            votesData.forEach(item => {
                votesMap[item.title] = {
                    likes: item.likes || 0,
                    dislikes: item.dislikes || 0
                };
            });
            
            return votesMap;
        } catch (error) {
            console.error('Failed to load anime votes:', error);
            return {};
        }
    }

    async function handleAnimeVote(animeTitle, voteType) {
        const votedAnime = JSON.parse(localStorage.getItem('votedAnime') || '{}');
        const existingVote = votedAnime[animeTitle];

        // Disable buttons on the specific card immediately to prevent double-clicks
        const card = document.querySelector(`.anime-card[data-anime-title="${animeTitle}"]`);
        if (card) {
            card.querySelectorAll('.anime-vote-btn').forEach(b => b.disabled = true);
        }

        try {
            // 1. Get the latest data
            const getResponse = await fetch(`${ANIME_VOTES_URL}/latest`, { 
                headers: { 'X-Master-Key': ANIME_VOTES_API_KEY } 
            });
            if (!getResponse.ok) throw new Error('Failed to fetch latest votes for voting.');
            const binData = await getResponse.json();
            let votesData = binData.record.data || [];

            // 2. Find or create entry for this anime
            let animeEntry = votesData.find(item => item.title === animeTitle);
            if (!animeEntry) {
                animeEntry = { title: animeTitle, likes: 0, dislikes: 0 };
                votesData.push(animeEntry);
            }

            // 3. Determine the new vote state
            const isRevoke = existingVote === voteType;
            const isChange = existingVote && existingVote !== voteType;

            if (isRevoke) {
                // User is revoking their vote
                animeEntry[voteType + 's'] = Math.max(0, (animeEntry[voteType + 's'] || 0) - 1);
                delete votedAnime[animeTitle];
            } else {
                if (isChange) {
                    // User is changing their vote (e.g., from like to dislike)
                    animeEntry[existingVote + 's'] = Math.max(0, (animeEntry[existingVote + 's'] || 0) - 1);
                }
                // Apply the new vote
                animeEntry[voteType + 's'] = (animeEntry[voteType + 's'] || 0) + 1;
                votedAnime[animeTitle] = voteType;
            }

            // 4. Update local storage with the new vote status
            localStorage.setItem('votedAnime', JSON.stringify(votedAnime));

            // 5. PUT the updated data back to the server
            const putResponse = await fetch(ANIME_VOTES_URL, {
                method: 'PUT',
                headers: { 'Content-Type': 'application/json', 'X-Master-Key': ANIME_VOTES_API_KEY },
                body: JSON.stringify({ data: votesData })
            });
            if (!putResponse.ok) throw new Error('Failed to save vote to server.');

            // 6. Update only the specific card instead of re-rendering everything
            if (card) {
                const likeBtn = card.querySelector('.like-btn');
                const dislikeBtn = card.querySelector('.dislike-btn');
                
                if (likeBtn) {
                    likeBtn.querySelector('span').textContent = animeEntry.likes || 0;
                }
                if (dislikeBtn) {
                    dislikeBtn.querySelector('span').textContent = animeEntry.dislikes || 0;
                }

                // Update button states
                if (isRevoke) {
                    // Vote was revoked - re-enable both buttons
                    if (likeBtn) {
                        likeBtn.disabled = false;
                        likeBtn.classList.remove('liked');
                    }
                    if (dislikeBtn) {
                        dislikeBtn.disabled = false;
                        dislikeBtn.classList.remove('disliked');
                    }
                } else {
                    // Vote was applied - disable both buttons and highlight the selected one
                    if (likeBtn) {
                        likeBtn.disabled = true;
                        if (voteType === 'like') {
                            likeBtn.classList.add('liked');
                        } else {
                            likeBtn.classList.remove('liked');
                        }
                    }
                    if (dislikeBtn) {
                        dislikeBtn.disabled = true;
                        if (voteType === 'dislike') {
                            dislikeBtn.classList.add('disliked');
                        } else {
                            dislikeBtn.classList.remove('disliked');
                        }
                    }
                }

                // 7. Trigger a particle-like effect on successful vote (only on apply/change, not revoke)
                if (!isRevoke) {
                    const effectBtn = voteType === 'like' ? likeBtn : dislikeBtn;
                    if (effectBtn) {
                        const effectClass = voteType === 'like' ? 'vote-success' : 'vote-fail';
                        effectBtn.classList.remove('vote-success', 'vote-fail');
                        // Force a reflow so re-adding the class retriggers the animation
                        void effectBtn.offsetWidth;
                        effectBtn.classList.add(effectClass);
                        setTimeout(() => {
                            effectBtn.classList.remove(effectClass);
                        }, 650);
                    }
                }
            }

        } catch (error) {
            console.error('Error handling vote:', error);
            alert('Could not save your vote due to a server error. Please try again.');
            // On failure, re-enable buttons on the specific card
            if (card) {
                card.querySelectorAll('.anime-vote-btn').forEach(b => b.disabled = false);
            }
        }
    }

  function updateAnimeCardVotes(card, votes) {
      const animeTitle = card.dataset.animeTitle;
      if (!animeTitle || !votes[animeTitle]) return;

      const voteData = votes[animeTitle];
      const likeBtn = card.querySelector('.anime-vote-btn.like-btn');
      const dislikeBtn = card.querySelector('.anime-vote-btn.dislike-btn');

      if (likeBtn) {
          likeBtn.querySelector('span').textContent = voteData.likes || 0;
      }
      if (dislikeBtn) {
          dislikeBtn.querySelector('span').textContent = voteData.dislikes || 0;
      }

      // Check local storage for vote status
      const votedAnime = JSON.parse(localStorage.getItem('votedAnime') || '{}');
      const voteStatus = votedAnime[animeTitle];
      
      if (voteStatus) {
          if (likeBtn) {
              likeBtn.disabled = true;
              if (voteStatus === 'like') {
                  likeBtn.classList.add('liked');
              } else {
                  likeBtn.classList.remove('liked');
              }
          }
          if (dislikeBtn) {
              dislikeBtn.disabled = true;
              if (voteStatus === 'dislike') {
                  dislikeBtn.classList.add('disliked');
              } else {
                  dislikeBtn.classList.remove('disliked');
              }
          }
      } else {
          if (likeBtn) {
              likeBtn.disabled = false;
              likeBtn.classList.remove('liked');
          }
          if (dislikeBtn) {
              dislikeBtn.disabled = false;
              dislikeBtn.classList.remove('disliked');
          }
      }
  }

  // ─── GFX Voting Functions ───
  async function loadGfxVotes() {
      try {
          const response = await fetch(`${GFX_VOTES_URL}/latest`, {
              headers: { 'X-Master-Key': ANIME_VOTES_API_KEY }
          });
          if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
          const data = await response.json();
          const votesData = data.record.data || [];
          const votesMap = {};
          votesData.forEach(item => {
              votesMap[item.title] = {
                  likes: item.likes || 0,
                  dislikes: item.dislikes || 0
              };
          });
          return votesMap;
      } catch (error) {
          console.error('Failed to load GFX votes:', error);
          return {};
      }
  }

  async function handleGfxVote(gfxTitle, voteType) {
      const votedGfx = JSON.parse(localStorage.getItem('votedGfx') || '{}');
      const existingVote = votedGfx[gfxTitle];

      const card = Array.from(document.querySelectorAll('#gfxSection .gfx-item')).find(fig => {
          const cap = fig.querySelector('figcaption');
          return cap && cap.textContent.trim() === gfxTitle;
      });
      if (card) {
          card.querySelectorAll('.anime-vote-btn').forEach(b => b.disabled = true);
      }

      try {
          const getResponse = await fetch(`${GFX_VOTES_URL}/latest`, {
              headers: { 'X-Master-Key': ANIME_VOTES_API_KEY }
          });
          if (!getResponse.ok) throw new Error('Failed to fetch latest GFX votes for voting.');
          const binData = await getResponse.json();
          let votesData = binData.record.data || [];

          let gfxEntry = votesData.find(item => item.title === gfxTitle);
          if (!gfxEntry) {
              gfxEntry = { title: gfxTitle, likes: 0, dislikes: 0 };
              votesData.push(gfxEntry);
          }

          const isRevoke = existingVote === voteType;
          const isChange = existingVote && existingVote !== voteType;

          if (isRevoke) {
              gfxEntry[voteType + 's'] = Math.max(0, (gfxEntry[voteType + 's'] || 0) - 1);
              delete votedGfx[gfxTitle];
          } else {
              if (isChange) {
                  gfxEntry[existingVote + 's'] = Math.max(0, (gfxEntry[existingVote + 's'] || 0) - 1);
              }
              gfxEntry[voteType + 's'] = (gfxEntry[voteType + 's'] || 0) + 1;
              votedGfx[gfxTitle] = voteType;
          }

          localStorage.setItem('votedGfx', JSON.stringify(votedGfx));

          const putResponse = await fetch(GFX_VOTES_URL, {
              method: 'PUT',
              headers: { 'Content-Type': 'application/json', 'X-Master-Key': ANIME_VOTES_API_KEY },
              body: JSON.stringify({ data: votesData })
          });
          if (!putResponse.ok) throw new Error('Failed to save GFX vote to server.');

          if (card) {
              const likeBtn = card.querySelector('.gfx-like-btn');
              const dislikeBtn = card.querySelector('.gfx-dislike-btn');

              if (likeBtn) likeBtn.querySelector('span').textContent = gfxEntry.likes || 0;
              if (dislikeBtn) dislikeBtn.querySelector('span').textContent = gfxEntry.dislikes || 0;

              if (isRevoke) {
                  if (likeBtn) {
                      likeBtn.disabled = false;
                      likeBtn.classList.remove('liked');
                  }
                  if (dislikeBtn) {
                      dislikeBtn.disabled = false;
                      dislikeBtn.classList.remove('disliked');
                  }
              } else {
                  if (likeBtn) {
                      likeBtn.disabled = true;
                      if (voteType === 'like') likeBtn.classList.add('liked');
                      else likeBtn.classList.remove('liked');
                  }
                  if (dislikeBtn) {
                      dislikeBtn.disabled = true;
                      if (voteType === 'dislike') dislikeBtn.classList.add('disliked');
                      else dislikeBtn.classList.remove('disliked');
                  }

                  const effectBtn = voteType === 'like' ? likeBtn : dislikeBtn;
                  if (effectBtn) {
                      const effectClass = voteType === 'like' ? 'vote-success' : 'vote-fail';
                      effectBtn.classList.remove('vote-success', 'vote-fail');
                      void effectBtn.offsetWidth;
                      effectBtn.classList.add(effectClass);
                      setTimeout(() => effectBtn.classList.remove(effectClass), 650);
                  }
              }
          }
      } catch (error) {
          console.error('Error handling GFX vote:', error);
          alert('Could not save your GFX vote due to a server error. Please try again.');
          if (card) {
              card.querySelectorAll('.anime-vote-btn').forEach(b => b.disabled = false);
          }
      }
  }

  // Expose GFX votes initializer on window so it’s always reachable from preview iframes
  window.initGfxVotes = function initGfxVotes() {
      loadGfxVotes().then(votesMap => {
          const votedGfx = JSON.parse(localStorage.getItem('votedGfx') || '{}');
          document.querySelectorAll('#gfxSection .gfx-item').forEach(fig => {
              const caption = fig.querySelector('figcaption');
              if (!caption) return;
              const title = caption.textContent.trim();

              const voteData = votesMap[title] || { likes: 0, dislikes: 0 };

              // Create buttons container if not present
              let btnContainer = fig.querySelector('.gfx-vote-buttons');
              if (!btnContainer) {
                  btnContainer = document.createElement('div');
                  btnContainer.className = 'gfx-vote-buttons';
                  btnContainer.innerHTML = `
                    <button class="anime-vote-btn gfx-like-btn" title="Like this GFX">
                      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M23,10C23,8.89 22.1,8 21,8H14.68L15.64,3.43C15.66,3.33 15.67,3.22 15.67,3.11C15.67,2.7 15.5,2.32 15.23,2.05L14.17,1L7.59,7.58C7.22,7.95 7,8.45 7,9V19A2,2 0 0,0 9,21H18C18.83,21 19.54,20.5 19.84,19.78L22.86,12.73C22.95,12.5 23,12.26 23,12V10M1,21H5V9H1V21Z"></path></svg>
                      <span>0</span>
                    </button>
                    <button class="anime-vote-btn gfx-dislike-btn" title="Dislike this GFX">
                      <svg viewBox="0 0 24 24" fill="currentColor"><path d="M19,15H23V3H19M15,3H6C5.17,3 4.46,3.5 4.16,4.22L1.14,11.27C1.05,11.5 1,11.74 1,12V14A2,2 0 0,0 3,16H9.32L8.36,20.57C8.34,20.67 8.33,20.78 8.33,20.89C8.33,21.3 8.5,21.68 8.77,21.95L9.83,23L16.41,16.42C16.78,16.05 17,15.55 17,15V5C17,3.89 16.1,3 15,3Z"></path></svg>
                      <span>0</span>
                    </button>
                  `;
                  fig.appendChild(btnContainer);
              }

              const likeBtn = fig.querySelector('.gfx-like-btn');
              const dislikeBtn = fig.querySelector('.gfx-dislike-btn');

              if (likeBtn) likeBtn.querySelector('span').textContent = voteData.likes || 0;
              if (dislikeBtn) dislikeBtn.querySelector('span').textContent = voteData.dislikes || 0;

              const status = votedGfx[title];
              if (status) {
                  if (likeBtn) {
                      likeBtn.disabled = true;
                      if (status === 'like') likeBtn.classList.add('liked');
                  }
                  if (dislikeBtn) {
                      dislikeBtn.disabled = true;
                      if (status === 'dislike') dislikeBtn.classList.add('disliked');
                  }
              } else {
                  if (likeBtn) {
                      likeBtn.disabled = false;
                      likeBtn.classList.remove('liked');
                  }
                  if (dislikeBtn) {
                      dislikeBtn.disabled = false;
                      dislikeBtn.classList.remove('disliked');
                  }
              }

              if (likeBtn && !likeBtn._gfxBound) {
                  likeBtn._gfxBound = true;
                  likeBtn.addEventListener('click', e => {
                      e.stopPropagation();
                      handleGfxVote(title, 'like');
                  });
              }
              if (dislikeBtn && !dislikeBtn._gfxBound) {
                  dislikeBtn._gfxBound = true;
                  dislikeBtn.addEventListener('click', e => {
                      e.stopPropagation();
                      handleGfxVote(title, 'dislike');
                  });
              }
          });
      });
  }

    function showCategory(catId, buttonElement) {
        if (currentCategory === catId) return;
        const prevCategory = currentCategory;
        currentCategory = catId;

        // Instantly update tab highlight
        document.querySelectorAll('.tab-button').forEach(b => b.classList.remove('active'));
        if (buttonElement) buttonElement.classList.add('active');

        // Animate heroHomeWrapper in sync with tab content
        const heroHome = document.getElementById('heroHomeWrapper');
        const isHome = catId === 'home';

        // --- NEW: Toggle compact-topbar class ---
        const container = document.getElementById('mainContainer');
        const categoryTabs = document.querySelector('.category-tabs');
        if (!isHome) {
          if (container) container.classList.add('compact-topbar');
          if (categoryTabs) categoryTabs.classList.add('compact-topbar');
          if (heroHome) heroHome.classList.add('hidden');
        } else {
          if (container) container.classList.remove('compact-topbar');
          if (categoryTabs) categoryTabs.classList.remove('compact-topbar');
          if (heroHome) heroHome.classList.remove('hidden');
        }

        const wrapper = document.getElementById('tabSectionsWrapper');
        const currentVisible = document.querySelector('.accolades-section.fade-section.show');
        const nextVisible = document.getElementById(catId + 'Section');

        if (!wrapper || !nextVisible) return;

        // Step 1: Fade out current
        if (currentVisible) {
          // Handle GFX cards fade-out animation
          if (prevCategory === 'gfx') {
            const gfxItems = currentVisible.querySelectorAll('.gfx-item');
            gfxItems.forEach((item, i) => {
              item.style.animation = 'none';
              item.style.opacity = '1';
              item.style.transform = 'translateY(0)';
              item.style.transition = 'opacity .22s ease, transform .22s ease';
              // Reverse stagger so it goes bottom-to-top
              const reverseIndex = (gfxItems.length - 1 - i);
              item.style.transitionDelay = `${Math.min(reverseIndex * 0.05, 0.25)}s`;
            });
            
            // Next frame, start the fade/translate out
            requestAnimationFrame(() => {
              gfxItems.forEach(item => {
                item.style.opacity = '0';
                item.style.transform = 'translateY(10px)';
              });
            });
          }
          
          currentVisible.classList.remove('show');
          if (prevCategory === 'home' && heroHome) heroHome.classList.remove('show');
        }
        if (!isHome && heroHome) heroHome.classList.remove('show');

        setTimeout(() => {
          // Step 2: Animate height to new tab
          if (currentVisible) currentVisible.classList.add('hidden');
          nextVisible.classList.remove('hidden');
          // For hero section
          if (isHome && heroHome) {
            heroHome.classList.remove('hidden');
          }
          // Ensure .show is present for accurate height
          let removeShowAfter = false;
          if (!nextVisible.classList.contains('show')) {
            nextVisible.classList.add('show');
            removeShowAfter = true;
          }
          const endHeight = nextVisible.offsetHeight;
          if (removeShowAfter) nextVisible.classList.remove('show');
          wrapper.style.height = endHeight + 'px';
          setTimeout(() => {
            // Step 3: Fade in new tab
            nextVisible.classList.add('show');
            if (isHome && heroHome) heroHome.classList.add('show');
            setTimeout(() => {
              wrapper.style.height = '';
            }, 600);
          }, 40); // Small delay to allow height to animate
        }, 600);

        // Trigger tab-specific logic
        if (catId === 'animeList') {
          const container = document.getElementById('animeGridContainer');
          
          if (animeDataCache.all.length === 0) {
            // Show loading indicator immediately
            if (container) showAnimeLoading(container);
            // Start loading if not already loading
            if (!isLoadingAnimeData) {
              loadAndPrepareAnimeData().then(() => {
                // Once loaded, render the list
                if (currentCategory === 'animeList') {
                  renderAnimeList();
                }
              });
            }
          } else {
            // Data is ready, render immediately
            renderAnimeList();
          }
        } else if (catId === 'schedule') {
          loadAndRenderSchedule();
        } else if (catId === 'games') {
          // nothing dynamic for now
        } else if (catId === 'gfx') {
          setTimeout(() => {
            nextVisible.querySelectorAll('.gfx-item').forEach((item, i) => {
              item.style.animation = 'none';
              setTimeout(() => item.style.animation = `fadeInUp 0.6s cubic-bezier(0.4,0,0.2,1) ${i * 0.05}s forwards`, 10);
            });
          }, 650);
        } else if (catId === 'home') {
          setTimeout(() => {
            const cards = nextVisible.querySelectorAll('.home-card');
            cards.forEach((card, i) => {
              card.style.animation = 'none';
              card.style.opacity = '0';
              card.style.transform = 'translateY(14px)';
              setTimeout(() => {
                card.style.animation = `fadeInUp .6s cubic-bezier(0.4,0,0.2,1) ${Math.min(i * 0.08, 0.35)}s forwards`;
              }, 10);
            });
          }, 650);
        }
    }

    /* visitor counter */
    function initVisitorCounter(){
      const binId='683f4c3f8561e97a501f44c4',
            apiKey='$2a$10$NwYMNtIZx5ag/xokwHWN4.1u.yOLzNxLLroIP/IBcjJBEi0YiB81e',
            url=`https://api.jsonbin.io/v3/b/${binId}`,
            headers={'Content-Type':'application/json','X-Master-Key':apiKey};
      
      fetch(url,{headers})
        .then(r=>r.json())
        .then(d=>{
          const real=d.record.visits+1,
                total=real+146;
          
          fetch(url,{method:'PUT',headers,body:JSON.stringify({visits:real})});
          
          const el=document.getElementById('visitorCount'),
                msgEl=document.getElementById('visitorMessage'),
                dur=2000,
                start=performance.now();
          
          function anim(t){
            const p=Math.min((t-start)/dur,1),
                  ease=1-Math.pow(1-p,3);
            el.textContent=Math.floor(total*ease).toLocaleString();
            if(p<1){
              requestAnimationFrame(anim);
            }else{
              el.textContent=total.toLocaleString();
              if(msgEl){
                msgEl.classList.add('show');
              }
            }
          }
          requestAnimationFrame(anim);
        })
        .catch(()=>{
          const el=document.getElementById('visitorCount');
          if(el) el.textContent='N/A';
        });
    }
    setTimeout(initVisitorCounter,3200);

    // Custom dropdown initialization
    function initCustomDropdowns() {
      // Initialize category filter dropdown
      const categoryDropdown = document.getElementById('categoryFilterDropdown');
      const categoryHeader = document.getElementById('categoryFilterHeader');
      const categoryMenu = document.getElementById('categoryFilterMenu');
      
      // Initialize sort dropdown
      const sortDropdown = document.getElementById('sortOrderDropdown');
      const sortHeader = document.getElementById('sortOrderHeader');
      const sortMenu = document.getElementById('sortOrderMenu');
      
      // Function to close all dropdowns
      function closeAllDropdowns() {
        categoryMenu.classList.remove('active');
        categoryHeader.classList.remove('active');
        sortMenu.classList.remove('active');
        sortHeader.classList.remove('active');
      }
      
      // Category dropdown handlers
      categoryHeader.addEventListener('click', (e) => {
        e.stopPropagation();
        const isActive = categoryMenu.classList.contains('active');
        closeAllDropdowns();
        if (!isActive) {
          categoryMenu.classList.add('active');
          categoryHeader.classList.add('active');
        }
      });
      
      // Use event delegation for category options (works with dynamically added options)
      categoryMenu.addEventListener('click', (e) => {
        const option = e.target.closest('.custom-dropdown-option');
        if (!option) return;
        
        e.stopPropagation();
        const value = option.dataset.value;
        const text = option.textContent;
        
        // Update selected state
        categoryMenu.querySelectorAll('.custom-dropdown-option').forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        
        // Update header
        categoryHeader.querySelector('.dropdown-text').textContent = text;
        categoryHeader.dataset.value = value;
        
        // Close dropdown
        closeAllDropdowns();
        
        // Trigger render
        renderAnimeList();
      });
      
      // Sort dropdown handlers
      sortHeader.addEventListener('click', (e) => {
        e.stopPropagation();
        const isActive = sortMenu.classList.contains('active');
        closeAllDropdowns();
        if (!isActive) {
          sortMenu.classList.add('active');
          sortHeader.classList.add('active');
        }
      });
      
      // Sort options (static, but using delegation for consistency)
      sortMenu.addEventListener('click', (e) => {
        const option = e.target.closest('.custom-dropdown-option');
        if (!option) return;
        
        e.stopPropagation();
        const value = option.dataset.value;
        const text = option.textContent;
        
        // Update selected state
        sortMenu.querySelectorAll('.custom-dropdown-option').forEach(opt => opt.classList.remove('selected'));
        option.classList.add('selected');
        
        // Update header
        sortHeader.querySelector('.dropdown-text').textContent = text;
        sortHeader.dataset.value = value;
        
        // Close dropdown
        closeAllDropdowns();
        
        // Trigger render
        renderAnimeList();
      });
      
      // Close dropdowns when clicking outside
      document.addEventListener('click', (e) => {
        if (!categoryDropdown.contains(e.target) && !sortDropdown.contains(e.target)) {
          closeAllDropdowns();
        }
      });
      
      // Close dropdowns on escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          closeAllDropdowns();
        }
      });
    }

    document.addEventListener('DOMContentLoaded', () => {
      // GFX Image Preloading
      const gfxImageUrls = [
        'https://i.ibb.co/TJRKbQb/nashville-35.png',
        'https://i.ibb.co/KpBsy0g9/Lockset-DTOTY.png',
        'https://i.ibb.co/V0PFbvGD/nashville-27.png',
        'https://i.ibb.co/HTG8VZLF/nashville-17.png',
        'https://i.ibb.co/zVzYshr1/nashville-10.png',
        'https://i.ibb.co/Y7DMPs8d/nashville-36.png',
        'https://i.ibb.co/PvPzmcgr/EHSGFX-17.png',
        'https://i.ibb.co/ymy4jfJK/nashville-28.png'
      ];

      // Preload GFX images in the background
      function preloadGFXImages() {
        gfxImageUrls.forEach(url => {
          const img = new Image();
          img.src = url;
        });
      }

      // Start preloading immediately
      preloadGFXImages();

      // Randomize initial loader message
      const initialLoader = document.getElementById('animeListLoading');
      if (initialLoader) {
        const messageSpan = initialLoader.querySelector('.loader-message-text');
        if (messageSpan) {
          messageSpan.textContent = getRandomLoadingMessage();
        }
      }

      // Mouse tracking for interactive gradients
      function setupMouseTracking() {
        const interactiveElements = document.querySelectorAll('.hero-shell, .hero-profile, .home-card, .home-link-tile, .home-nav-btn, .schedule-item, .accolade-card, .gfx-item, .social-card');
        
        interactiveElements.forEach(element => {
          element.addEventListener('mousemove', (e) => {
            const rect = element.getBoundingClientRect();
            const x = ((e.clientX - rect.left) / rect.width) * 100;
            const y = ((e.clientY - rect.top) / rect.height) * 100;
            element.style.setProperty('--mouse-x', `${x}%`);
            element.style.setProperty('--mouse-y', `${y}%`);
          });
          
          element.addEventListener('mouseleave', () => {
            element.style.setProperty('--mouse-x', '50%');
            element.style.setProperty('--mouse-y', '50%');
          });
        });
      }
      
      // Setup mouse tracking after a short delay to ensure elements are rendered
      setTimeout(setupMouseTracking, 100);

      // Home quick-nav buttons (hero + featured) -> switch tabs
      document.addEventListener('click', (e) => {
        const navEl = e.target.closest('[data-nav-category]');
        if (!navEl) return;
        const targetCat = navEl.getAttribute('data-nav-category');
        if (!targetCat) return;

        const tabBtn = document.querySelector(`.tab-button[data-category="${targetCat}"]`);
        if (tabBtn) {
          showCategory(targetCat, tabBtn);
        }
      });

      // Local time (Home stats)
      (function initLocalTime() {
        const el = document.getElementById('localTime');
        if (!el) return;
        const fmt = new Intl.DateTimeFormat(undefined, { hour: 'numeric', minute: '2-digit', second: '2-digit' });
        const tick = () => { el.textContent = fmt.format(new Date()); };
        tick();
        setInterval(tick, 1000);
      })();

      // ─────────────  GFX LIGHTBOX FUNCTIONALITY  ─────────────
      const lightbox = document.getElementById('gfxLightbox');
      const lightboxImg = lightbox.querySelector('.gfx-lightbox-img');
      const lightboxCaption = lightbox.querySelector('.gfx-lightbox-caption');
      const lightboxClose = lightbox.querySelector('.gfx-lightbox-close');
      const lightboxPrev = lightbox.querySelector('.gfx-lightbox-prev');
      const lightboxNext = lightbox.querySelector('.gfx-lightbox-next');
      let currentGfxIndex = 0;
      let gfxItems = [];

      function initGfxLightbox() {
        gfxItems = Array.from(document.querySelectorAll('#gfxSection .gfx-item'));
        
        // Open lightbox on card click
        gfxItems.forEach((item, index) => {
          const img = item.querySelector('.gfx-img');
          const caption = item.querySelector('figcaption');
          
          // Click on card or view button
          const viewBtn = item.querySelector('.gfx-view-btn');
          if (viewBtn) {
            viewBtn.addEventListener('click', (e) => {
              e.stopPropagation();
              openLightbox(index);
            });
          }
          
          item.addEventListener('click', (e) => {
            if (!e.target.closest('.gfx-view-btn')) {
              openLightbox(index);
            }
          });
        });

        // Close lightbox
        lightboxClose.addEventListener('click', closeLightbox);
        lightbox.addEventListener('click', (e) => {
          if (e.target === lightbox) closeLightbox();
        });

        // Navigation
        lightboxPrev.addEventListener('click', (e) => {
          e.stopPropagation();
          navigateLightbox(-1);
        });
        lightboxNext.addEventListener('click', (e) => {
          e.stopPropagation();
          navigateLightbox(1);
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
          if (!lightbox.classList.contains('active')) return;
          if (e.key === 'Escape') closeLightbox();
          if (e.key === 'ArrowLeft') navigateLightbox(-1);
          if (e.key === 'ArrowRight') navigateLightbox(1);
        });
      }

      function openLightbox(index) {
        if (index < 0 || index >= gfxItems.length) return;
        currentGfxIndex = index;
        const item = gfxItems[index];
        const img = item.querySelector('.gfx-img');
        const caption = item.querySelector('figcaption');
        
        lightboxImg.src = img.src;
        lightboxImg.alt = img.alt;
        lightboxCaption.textContent = caption.textContent;
        
        lightbox.classList.add('active');
        document.body.style.overflow = 'hidden';
        
        // Update nav buttons visibility
        lightboxPrev.style.display = gfxItems.length > 1 ? 'flex' : 'none';
        lightboxNext.style.display = gfxItems.length > 1 ? 'flex' : 'none';
      }

      function closeLightbox() {
        lightbox.classList.remove('active');
        document.body.style.overflow = '';
      }

      function navigateLightbox(direction) {
        const newIndex = currentGfxIndex + direction;
        if (newIndex < 0) {
          openLightbox(gfxItems.length - 1);
        } else if (newIndex >= gfxItems.length) {
          openLightbox(0);
        } else {
          openLightbox(newIndex);
        }
      }

      // Initialize lightbox & GFX votes when DOM is ready
      setTimeout(() => {
        initGfxLightbox();
        if (typeof initGfxVotes === 'function') {
          initGfxVotes();
        } else {
          console.warn('initGfxVotes is not available at runtime');
        }
      }, 500);

      // Show heroHomeWrapper if Home is active on load
      const heroHome = document.getElementById('heroHomeWrapper');
      const isHome = currentCategory === 'home';
      const container = document.getElementById('mainContainer');
      const categoryTabs = document.querySelector('.category-tabs');
      if (!isHome) {
        if (container) container.classList.add('compact-topbar');
        if (categoryTabs) categoryTabs.classList.add('compact-topbar');
        if (heroHome) heroHome.classList.add('hidden');
      } else {
        if (container) container.classList.remove('compact-topbar');
        if (categoryTabs) categoryTabs.classList.remove('compact-topbar');
        if (heroHome) {
          heroHome.classList.remove('hidden');
          heroHome.classList.add('show'); // Ensure visible on first load
        }
      }
      // Show only the active tab section with fade
      document.querySelectorAll('.accolades-section.fade-section').forEach(section => {
        if (section.id === currentCategory + 'Section') {
          section.classList.add('show');
          section.classList.remove('hidden');
          section.style.position = '';
          section.style.visibility = '';
          section.style.pointerEvents = '';
          section.style.zIndex = '';
        } else {
          section.classList.remove('show');
          section.classList.add('hidden');
          section.style.position = '';
          section.style.visibility = '';
          section.style.pointerEvents = '';
          section.style.zIndex = '';
        }
      });
      // Typing effect
      const phrases=[
      '"life is like a box of chocolates" - me',
      "watch frieren its peak",
      "idk what to put here",
      "bleach clears one piece",
      "there is not a single bad music/band anime in existence",
      "table expected, got nil 😢"],shuffled=phrases.slice().sort(()=>Math.random()-.5);let idx=0,ch=0;const tEl=document.getElementById("typing");if(tEl){function type(){if(ch<=shuffled[idx].length){tEl.textContent=shuffled[idx].slice(0,ch++);setTimeout(type,100);}else{setTimeout(()=>del(),2000);}}function del(){if(ch>0){tEl.textContent=shuffled[idx].slice(0,--ch);setTimeout(del,50);}else{idx=(idx+1)%shuffled.length;setTimeout(type,500);}}type();}

      // Tab button event listeners
      document.querySelectorAll('.tab-button').forEach(btn => {
        btn.addEventListener('click', function() {
          const catId = this.getAttribute('data-category');
          showCategory(catId, this);
        });
      });

      // Games accordion behavior
      document.querySelectorAll('.accordion-header').forEach(header => {
        header.addEventListener('click', () => {
          const expanded = header.getAttribute('aria-expanded') === 'true';
          header.setAttribute('aria-expanded', expanded ? 'false' : 'true');
          const content = header.nextElementSibling;
          if (content) {
            if (!expanded) {
              // Opening
              content.classList.remove('closing');
              content.classList.add('open');
              // Stagger cards
              const cards = content.querySelectorAll('.accolade-card');
              cards.forEach((card, i) => {
                card.style.animationDelay = `${Math.min(i * 0.05, 0.4)}s`;
              });
              content.style.maxHeight = content.scrollHeight + 'px';
            } else {
              // Closing: fade cards first, then collapse height
              const cards = content.querySelectorAll('.accolade-card');

              // Freeze current height and force reflow
              content.style.maxHeight = content.scrollHeight + 'px';
              void content.offsetHeight;

              // Prepare each card to transition from visible to hidden with stagger
              cards.forEach((card, i) => {
                // Cancel any running entrance animation and lock current visible state
                card.style.animation = 'none';
                card.style.opacity = '1';
                card.style.transform = 'translateY(0)';
                card.style.transition = 'opacity .22s ease, transform .22s ease';
                // Reverse stagger so it goes bottom-to-top
                const reverseIndex = (cards.length - 1 - i);
                card.style.transitionDelay = `${Math.min(reverseIndex * 0.05, 0.25)}s`;
              });

              // Next frame, start the fade/translate out
              requestAnimationFrame(() => {
                cards.forEach(card => {
                  card.style.opacity = '0';
                  card.style.transform = 'translateY(10px)';
                });
              });

              // After fade duration + max stagger, collapse the container
              const fadeMs = 220;
              const maxStaggerMs = Math.min((cards.length - 1) * 50, 250);
              const totalDelay = fadeMs + maxStaggerMs + 20;
              setTimeout(() => {
                content.style.maxHeight = '0px';
              }, totalDelay);

              // Cleanup after collapse completes
              const onTransitionEnd = (e) => {
                if (e.propertyName === 'max-height') {
                  content.classList.remove('open');
                  content.classList.remove('closing');
                  content.style.maxHeight = '';
                  cards.forEach(card => {
                    card.style.transition = '';
                    card.style.transitionDelay = '';
                    card.style.animation = '';
                    card.style.animationDelay = '';
                    card.style.opacity = '';
                    card.style.transform = '';
                  });
                  content.removeEventListener('transitionend', onTransitionEnd);
                }
              };
              content.addEventListener('transitionend', onTransitionEnd);
            }
          }
        });
      });

      document.querySelectorAll('.accolade-icon').forEach(icon => {
        const delay = (Math.random() * 2).toFixed(2); 
        icon.style.animationDelay = `${delay}s`;
      });

      loadAndPrepareAnimeData().then(() => {
        loadAndCacheScheduleData(); 
      });

      // Initialize custom dropdowns
      initCustomDropdowns();

      // Debounced search so we don't re-render on every keystroke
      function debounce(fn, delay) {
        let timeout;
        return (...args) => {
          clearTimeout(timeout);
          timeout = setTimeout(() => fn(...args), delay);
        };
      }

      const debouncedSearchRender = debounce(() => renderAnimeList(), 180);
      document.getElementById('searchBar').addEventListener('input', debouncedSearchRender);
      document.getElementById('refreshScheduleBtn').addEventListener('click', () => loadAndRenderSchedule(true));
    });

  </script>
</body>
</html>
